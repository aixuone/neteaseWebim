!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Netcall=e():t.Netcall=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=377)}([,function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(36)("wks"),o=n(26),r=n(1).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i={info:{hash:"b673e1061edc2c68f882c04c1a45a56950fb1231",shortHash:"b673e106",version:"5.2.0",sdkVersion:"49",nrtcVersion:"4.0.0",nrtcSdkVersion:"1",protocolVersion:1},agentVersion:"2.6.0.328",lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",roomserver:"roomserver.netease.im",connectTimeout:18e3,xhrTimeout:18e3,socketTimeout:18e3,reconnectionDelay:1e3,reconnectionDelayMax:18e3,reconnectionJitter:.1,heartbeatInterval:18e4,cmdTimeout:18e3,defaultReportUrl:"https://dr.netease.im/1.gif",isWeixinApp:!1,isNodejs:!1,isRN:!1,formatSocketUrl:function(t){var e=t.url,n=t.secure?"https":"http";return-1===e.indexOf("http")?n+"://"+e:e},uploadUrl:"https://nos.netease.com",replaceUrl:"https://{bucket}.nosdn.127.net/{object}",downloadHost:"nos.netease.com",downloadUrl:"https://{bucket}.nosdn.127.net/{object}",httpsEnabled:!1,genUploadUrl:function(t){return i.uploadUrl+"/"+t},genDownloadUrl:function(t,e){var n=i.replaceUrl;return/^http/.test(n)?i.httpsEnabled&&(n=n.replace("http","https")):n=i.httpsEnabled?"https://"+n:"http://"+n,n.replace("{bucket}",t).replace("{object}",e)}};t.exports=i},function(t,e){var n=t.exports={version:"2.5.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";e.__esModule=!0;var i=a(n(94)),o=a(n(83)),r="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===r(i.default)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":r(t)}},function(t,e,n){var i=n(9),o=n(54),r=n(38),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(11);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(6),o=n(19);t.exports=n(8)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(68),o=n(39);t.exports=function(t){return i(o(t))}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var i=n(1),o=n(4),r=n(42),a=n(10),s=n(7),c=function(t,e,n){var u,l,d,h=t&c.F,f=t&c.G,p=t&c.S,v=t&c.P,m=t&c.B,g=t&c.W,_=f?o:o[e]||(o[e]={}),y=_.prototype,b=f?i:p?i[e]:(i[e]||{}).prototype;for(u in f&&(n=e),n)(l=!h&&b&&void 0!==b[u])&&s(_,u)||(d=l?b[u]:n[u],_[u]=f&&"function"!=typeof b[u]?n[u]:m&&l?r(d,i):g&&b[u]==d?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):v&&"function"==typeof d?r(Function.call,d):d,v&&((_.virtual||(_.virtual={}))[u]=d,t&c.R&&y&&!y[u]&&a(y,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){"use strict";(function(e){var i,o=n(5),r=(i=o)&&i.__esModule?i:{default:i};var a=function(){var t="object"===(void 0===e?"undefined":(0,r.default)(e))?e:window,n=Math.pow(2,53)-1,i=/\bOpera/,o=Object.prototype,a=o.hasOwnProperty,s=o.toString;function c(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function u(t){return t=p(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:c(t)}function l(t,e){for(var n in t)a.call(t,n)&&e(t[n],n,t)}function d(t){return null==t?c(t):s.call(t).slice(8,-1)}function h(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function f(t,e){var i=null;return function(t,e){var i=-1,o=t?t.length:0;if("number"==typeof o&&o>-1&&o<=n)for(;++i<o;)e(t[i],i,t);else l(t,e)}(t,function(n,o){i=e(i,n,o,t)}),i}function p(t){return String(t).replace(/^ +| +$/g,"")}return function e(n){var o=t,a=n&&"object"==(void 0===n?"undefined":(0,r.default)(n))&&"String"!=d(n);a&&(o=n,n=null);var c=o.navigator||{},v=c.userAgent||"";n||(n=v);var m,g,_,y,b,C=a?!!c.likeChrome:/\bChrome\b/.test(n)&&!/internal|\n/i.test(s.toString()),S=a?"Object":"ScriptBridgingProxyObject",T=a?"Object":"Environment",A=a&&o.java?"JavaPackage":d(o.java),E=a?"Object":"RuntimeObject",O=/\bJava/.test(A)&&o.java,I=O&&d(o.environment)==T,M=O?"a":"α",x=O?"b":"β",w=o.document||{},k=o.operamini||o.opera,N=i.test(N=a&&k?k["[[Class]]"]:d(k))?N:k=null,L=n,P=[],R=null,D=n==v,U=D&&k&&"function"==typeof k.version&&k.version(),j=f([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(t,e){return t||RegExp("\\b"+(e.pattern||h(e))+"\\b","i").exec(n)&&(e.label||e)}),V=function(t){return f(t,function(t,e){return t||RegExp("\\b"+(e.pattern||h(e))+"\\b","i").exec(n)&&(e.label||e)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=H([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(t){return f(t,function(t,e,i){return t||(e[F]||e[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+h(i)+"(?:\\b|\\w*\\d)","i").exec(n))&&i})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),B=function(t){return f(t,function(t,e){var i=e.pattern||h(e);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))&&(t=function(t,e,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),t=u(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,i,e.label||e)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function H(t){return f(t,function(t,e){var i=e.pattern||h(e);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(n)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))&&((t=String(e.label&&!RegExp(i,"i").test(e.label)?e.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),e=e.label||e,t=u(t[0].replace(RegExp(i,"i"),e).replace(RegExp("; *(?:"+e+"[_-])?","i")," ").replace(RegExp("("+e+")[-_.]?(\\w)","i"),"$1 $2"))),t})}if(j&&(j=[j]),W&&!F&&(F=H([W])),(m=/\bGoogle TV\b/.exec(F))&&(F=m[0]),/\bSimulator\b/i.test(n)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==V&&/\bOPiOS\b/.test(n)&&P.push("running in Turbo/Uncompressed mode"),"IE"==V&&/\blike iPhone OS\b/.test(n)?(W=(m=e(n.replace(/like iPhone OS/,""))).manufacturer,F=m.product):/^iP/.test(F)?(V||(V="Safari"),B="iOS"+((m=/ OS ([\d_]+)/i.exec(n))?" "+m[1].replace(/_/g,"."):"")):"Konqueror"!=V||/buntu/i.test(B)?W&&"Google"!=W&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(n)||/\bVita\b/.test(F))||/\bAndroid\b/.test(B)&&/^Chrome/.test(V)&&/\bVersion\//i.test(n)?(V="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==V?(/\bMobi/i.test(n)||(B="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(n)&&P.unshift("accelerated")):"PaleMoon"==V&&(m=/\bFirefox\/([\d.]+)\b/.exec(n))?P.push("identifying as Firefox "+m[1]):"Firefox"==V&&(m=/\b(Mobile|Tablet|TV)\b/i.exec(n))?(B||(B="Firefox OS"),F||(F=m[1])):!V||(m=!/\bMinefield\b/i.test(n)&&/\b(?:Firefox|Safari)\b/.exec(V))?(V&&!F&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(m+"/")+8))&&(V=null),(m=F||W||B)&&(F||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:m)+" Browser")):"Electron"==V&&(m=(/\bChrome\/([\d.]+)\b/.exec(n)||0)[1])&&P.push("Chromium "+m):B="Kubuntu",U||(U=f(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(V),"(?:Firefox|Minefield|NetFront)"],function(t,e){return t||(RegExp(e+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null})),(m=("iCab"==j&&parseFloat(U)>3?"WebKit":/\bOpera\b/.test(V)&&(/\bOPR\b/.test(n)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(n)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(j=[m]),"IE"==V&&(m=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])?(V+=" Mobile",B="Windows Phone "+(/\+$/.test(m)?m:m+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(n)?(V="IE Mobile",B="Windows Phone 8.x",P.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(n)||0)[1])):"IE"!=V&&"Trident"==j&&(m=/\brv:([\d.]+)/.exec(n))&&(V&&P.push("identifying as "+V+(U?" "+U:"")),V="IE",U=m[1]),D){if(y="global",b=null!=(_=o)?(0,r.default)(_[y]):"number",/^(?:boolean|number|string|undefined)$/.test(b)||"object"==b&&!_[y])d(m=o.runtime)==S?(V="Adobe AIR",B=m.flash.system.Capabilities.os):d(m=o.phantom)==E?(V="PhantomJS",U=(m=m.version||null)&&m.major+"."+m.minor+"."+m.patch):"number"==typeof w.documentMode&&(m=/\bTrident\/(\d+)/i.exec(n))?(U=[U,w.documentMode],(m=+m[1]+4)!=U[1]&&(P.push("IE "+U[1]+" mode"),j&&(j[1]=""),U[1]=m),U="IE"==V?String(U[1].toFixed(1)):U[0]):"number"==typeof w.documentMode&&/^(?:Chrome|Firefox)\b/.test(V)&&(P.push("masking as "+V+" "+U),V="IE",U="11.0",j=["Trident"],B="Windows");else if(O&&(L=(m=O.lang.System).getProperty("os.arch"),B=B||m.getProperty("os.name")+" "+m.getProperty("os.version")),I){try{U=o.require("ringo/engine").version.join("."),V="RingoJS"}catch(t){(m=o.system)&&m.global.system==o.system&&(V="Narwhal",B||(B=m[0].os||null))}V||(V="Rhino")}else"object"==(0,r.default)(o.process)&&!o.process.browser&&(m=o.process)&&("object"==(0,r.default)(m.versions)&&("string"==typeof m.versions.electron?(P.push("Node "+m.versions.node),V="Electron",U=m.versions.electron):"string"==typeof m.versions.nw&&(P.push("Chromium "+U,"Node "+m.versions.node),V="NW.js",U=m.versions.nw)),V||(V="Node.js",L=m.arch,B=m.platform,U=(U=/[\d.]+/.exec(m.version))?U[0]:null));B=B&&u(B)}if(U&&(m=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(D&&c.appMinorVersion))||/\bMinefield\b/i.test(n)&&"a")&&(R=/b/i.test(m)?"beta":"alpha",U=U.replace(RegExp(m+"\\+?$"),"")+("beta"==R?x:M)+(/\d+\+?/.exec(m)||"")),"Fennec"==V||"Firefox"==V&&/\b(?:Android|Firefox OS)\b/.test(B))V="Firefox Mobile";else if("Maxthon"==V&&U)U=U.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(B=null),"Xbox 360"==F&&/\bIEMobile\b/.test(n)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(V)&&(!V||F||/Browser|Mobi/.test(V))||"Windows CE"!=B&&!/Mobi/i.test(n))if("IE"==V&&D)try{null===o.external&&P.unshift("platform preview")}catch(t){P.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(n))&&(m=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||U)?(B=((m=[m,/BB10/.test(n)])[1]?(F=null,W="BlackBerry"):"Device Software")+" "+m[0],U=null):this!=l&&"Wii"!=F&&(D&&k||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(n)||"Firefox"==V&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==V&&(B&&!/^Win/.test(B)&&U>5.5||/\bWindows XP\b/.test(B)&&U>8||8==U&&!/\bTrident\b/.test(n)))&&!i.test(m=e.call(l,n.replace(i,"")+";"))&&m.name&&(m="ing as "+m.name+((m=m.version)?" "+m:""),i.test(V)?(/\bIE\b/.test(m)&&"Mac OS"==B&&(B=null),m="identify"+m):(m="mask"+m,V=N?u(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(m)&&(B=null),D||(U=null)),j=["Presto"],P.push(m));else V+=" Mobile";(m=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1])&&(m=[parseFloat(m.replace(/\.(\d)$/,".0$1")),m],"Safari"==V&&"+"==m[1].slice(-1)?(V="WebKit Nightly",R="alpha",U=m[1].slice(0,-1)):U!=m[1]&&U!=(m[2]=(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1])||(U=null),m[1]=(/\bChrome\/([\d.]+)/i.exec(n)||0)[1],537.36==m[0]&&537.36==m[2]&&parseFloat(m[1])>=28&&"WebKit"==j&&(j=["Blink"]),D&&(C||m[1])?(j&&(j[1]="like Chrome"),m=m[1]||((m=m[0])<530?1:m<532?2:m<532.05?3:m<533?4:m<534.03?5:m<534.07?6:m<534.1?7:m<534.13?8:m<534.16?9:m<534.24?10:m<534.3?11:m<535.01?12:m<535.02?"13+":m<535.07?15:m<535.11?16:m<535.19?17:m<536.05?18:m<536.1?19:m<537.01?20:m<537.11?"21+":m<537.13?23:m<537.18?24:m<537.24?25:m<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),m=(m=m[0])<400?1:m<500?2:m<526?3:m<533?4:m<534?"4+":m<535?5:m<537?6:m<538?7:m<601?8:"8"),j&&(j[1]+=" "+(m+="number"==typeof m?".x":/[.+]/.test(m)?"":"+")),"Safari"==V&&(!U||parseInt(U)>45)&&(U=m)),"Opera"==V&&(m=/\bzbov|zvav$/.exec(B))?(V+=" ",P.unshift("desktop mode"),"zvav"==m?(V+="Mini",U=null):V+="Mobile",B=B.replace(RegExp(" *"+m+"$"),"")):"Safari"==V&&/\bChrome\b/.exec(j&&j[1])&&(P.unshift("desktop mode"),V="Chrome Mobile",U=null,/\bOS X\b/.test(B)?(W="Apple",B="iOS 4.3+"):B=null),U&&0==U.indexOf(m=/[\d.]+$/.exec(B))&&n.indexOf("/"+m+"-")>-1&&(B=p(B.replace(m,""))),j&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||"Safari"!=V&&/^iOS/.test(B)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(V)&&j[1])&&(m=j[j.length-1])&&P.push(m),P.length&&(P=["("+P.join("; ")+")"]),W&&F&&F.indexOf(W)<0&&P.push("on "+W),F&&P.push((/^on /.test(P[P.length-1])?"":"on ")+F),B&&(m=/ ([\d.+]+)$/.exec(B),g=m&&"/"==B.charAt(B.length-m[0].length-1),B={architecture:32,family:m&&!g?B.replace(m[0],""):B,version:m?m[1]:null,toString:function(){var t=this.version;return this.family+(t&&!g?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(m=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+m),"")),V&&(/\bWOW64\b/i.test(n)||D&&/\w(?:86|32)$/.test(c.cpuClass||c.platform)&&!/\bWin64; x64\b/i.test(n))&&P.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==V&&parseFloat(U)>=39&&(B.architecture=64),n||(n=null);var Y={};return Y.description=n,Y.layout=j&&j[0],Y.manufacturer=W,Y.name=V,Y.prerelease=R,Y.product=F,Y.ua=n,Y.version=V&&U,Y.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=e,Y.toString=function(){return this.description||""},Y.version&&P.unshift(U),Y.name&&P.unshift(V),B&&V&&(B!=String(B).split(" ")[0]||B!=V.split(" ")[0]&&!F)&&P.push(F?"("+B+")":"on "+B),P.length&&(Y.description=P.join(" ")),Y}()}();t.exports=a}).call(this,n(27))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,function(t,e){t.exports={}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=!0},function(t,e,n){"use strict";e.__esModule=!0;var i=a(n(136)),o=a(n(132)),r=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,r.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var i,o=n(5),r=(i=o)&&i.__esModule?i:{default:i};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},,function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.url2origin=e.uniqueID=e.off=e.removeEventListener=e.on=e.addEventListener=e.format=e.regWhiteSpace=e.regBlank=e.emptyFunc=e.f=e.emptyObj=e.o=void 0;var i,o=n(5),r=(i=o)&&i.__esModule?i:{default:i};e.getGlobal=a,e.detectCSSFeature=function(t){var e=!1,n="Webkit Moz ms O".split(" "),i=document.createElement("div"),o=null;t=t.toLowerCase(),void 0!==i.style[t]&&(e=!0);if(!1===e){o=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;r++)if(void 0!==i.style[n[r]+o]){e=!0;break}}return e},e.fix=s,e.getYearStr=c,e.getMonthStr=u,e.getDayStr=l,e.getHourStr=d,e.getMinuteStr=h,e.getSecondStr=f,e.getMillisecondStr=p,e.dateFromDateTimeLocal=function(t){return t=""+t,new Date(t.replace(/-/g,"/").replace("T"," "))},e.getClass=g,e.typeOf=_,e.isString=y,e.isNumber=function(t){return"number"===_(t)},e.isBoolean=function(t){return"boolean"===_(t)},e.isArray=b,e.isFunction=C,e.isDate=S,e.isRegExp=function(t){return"regexp"===_(t)},e.isError=function(t){return"error"===_(t)},e.isnull=T,e.notnull=A,e.undef=E,e.notundef=O,e.exist=I,e.notexist=M,e.isObject=x,e.isEmpty=function(t){return M(t)||(y(t)||b(t))&&0===t.length},e.containsNode=function(t,e){if(t===e)return!0;for(;e.parentNode;){if(e.parentNode===t)return!0;e=e.parentNode}return!1},e.calcHeight=function(t){var e=t.parentNode||document.body;(t=t.cloneNode(!0)).style.display="block",t.style.opacity=0,t.style.height="auto",e.appendChild(t);var n=t.offsetHeight;return e.removeChild(t),n},e.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)},e.dataset=function(t,e,n){if(!I(n))return t.getAttribute("data-"+e);t.setAttribute("data-"+e,n)},e.target=function(t){return t.target||t.srcElement},e.createIframe=function(t){var e;if((t=t||{}).name)try{(e=document.createElement('<iframe name="'+t.name+'"></iframe>')).frameBorder=0}catch(n){(e=document.createElement("iframe")).name=t.name}else e=document.createElement("iframe");t.visible||(e.style.display="none");C(t.onload)&&k(e,"load",function n(i){if(!e.src)return;t.multi||L(e,"load",n);t.onload(i)});(t.parent||document.body).appendChild(e);var n=t.src||"about:blank";return setTimeout(function(){e.src=n},0),e},e.html2node=function(t){var e=document.createElement("div");e.innerHTML=t;var n=[],i=void 0,o=void 0;if(e.children)for(i=0,o=e.children.length;i<o;i++)n.push(e.children[i]);else for(i=0,o=e.childNodes.length;i<o;i++){var r=e.childNodes[i];1===r.nodeType&&n.push(r)}return n.length>1?e:n[0]},e.scrollTop=function(t){I(t)&&(document.documentElement.scrollTop=document.body.scrollTop=t);return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},e.forOwn=P,e.mixin=R,e.isJSON=U,e.parseJSON=function t(e){try{U(e)&&(e=JSON.parse(e)),x(e)&&P(e,function(n,i){switch(_(i)){case"string":case"object":e[n]=t(i)}})}catch(t){console.error(t)}return e},e.simpleClone=function(t){var e=[],n=JSON.stringify(t,function(t,n){if("object"===(void 0===n?"undefined":(0,r.default)(n))&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n});return JSON.parse(n)},e.merge=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){R(t,e)}),t},e.fillUndef=function(t,e){return P(e,function(e,n){E(t[e])&&(t[e]=n)}),t},e.checkWithDefault=function(t,e,n){var i=t[e]||t[e.toLowerCase()];M(i)&&(i=n,t[e]=i);return i},e.fetch=function(t,e){return P(t,function(n,i){I(e[n])&&(t[n]=e[n])}),t},e.string2object=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n={};return t.split(e).forEach(function(t){var e=t.split("="),i=e.shift();i&&(n[decodeURIComponent(i)]=decodeURIComponent(e.join("=")))}),n},e.object2string=j,e.genUrlSep=function(t){return t.indexOf("?")<0?"?":"&"},e.object2query=function(t){return j(t,"&",!0)},e.isFileInput=V,e.getKeys=function(t,e){var n=Object.keys(t);e&&n.sort(function(e,n){var i=V(t[e]),o=V(t[n]);return i===o?0:i?1:-1});return n};e.o={},e.emptyObj={},e.f=function(){},e.emptyFunc=function(){},e.regBlank=/\s+/gi,e.regWhiteSpace=/\s+/gi;function a(){return"undefined"!=typeof window?window:void 0!==t?t:{}}function s(t,e){e=e||2;for(var n=""+t;n.length<e;)n="0"+n;return n}function c(t){return""+t.getFullYear()}function u(t){return s(t.getMonth()+1)}function l(t){return s(t.getDate())}function d(t){return s(t.getHours())}function h(t){return s(t.getMinutes())}function f(t){return s(t.getSeconds())}function p(t){return s(t.getMilliseconds(),3)}var v,m;e.format=(v=/yyyy|MM|dd|hh|mm|ss|SSS/g,m={yyyy:c,MM:u,dd:l,hh:d,mm:h,ss:f,SSS:p},function(t,e){return t=new Date(t),isNaN(+t)?"invalid date":(e=e||"yyyy-MM-dd").replace(v,function(e){return m[e](t)})});function g(t){return Object.prototype.toString.call(t).slice(8,-1)}function _(t){return g(t).toLowerCase()}function y(t){return"string"===_(t)}function b(t){return"array"===_(t)}function C(t){return"function"===_(t)}function S(t){return"date"===_(t)}function T(t){return null===t}function A(t){return null!==t}function E(t){return void 0===t}function O(t){return void 0!==t}function I(t){return O(t)&&A(t)}function M(t){return E(t)||T(t)}function x(t){return I(t)&&"object"===_(t)}var w=e.addEventListener=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},k=e.on=w,N=e.removeEventListener=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)},L=e.off=N;function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2];for(var i in t)t.hasOwnProperty(i)&&e.call(n,i,t[i])}function R(t,e){P(e,function(e,n){t[e]=n})}var D;e.uniqueID=(D=0,function(){return""+D++});function U(t){return y(t)&&0===t.indexOf("{")&&t.lastIndexOf("}")===t.length-1}function j(t,e,n){if(!t)return"";var i=[];return P(t,function(t,e){C(e)||(S(e)?e=e.getTime():b(e)?e=e.join(","):x(e)&&(e=JSON.stringify(e)),n&&(e=encodeURIComponent(e)),i.push(encodeURIComponent(t)+"="+e))}),i.join(e||",")}e.url2origin=function(){var t=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(e){return t.test(e||"")?RegExp.$1.toLowerCase():""}}();function V(t){var e=a();return t.tagName&&"INPUT"===t.tagName.toUpperCase()||e.Blob&&t instanceof e.Blob}}).call(this,n(27))},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,o="~";function r(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(o=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var n=o?o+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,s=new Array(a);r<a;r++)s[r]=i[r].fn;return s},s.prototype.emit=function(t,e,n,i,r,a){var s=o?o+t:t;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,r),!0;case 6:return l.fn.call(l.context,e,n,i,r,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(t,e,n){var i=new a(e,n||this),r=o?o+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):(this._events[r]=i,this._eventsCount++),this},s.prototype.once=function(t,e,n){var i=new a(e,n||this,!0),r=o?o+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):(this._events[r]=i,this._eventsCount++),this},s.prototype.removeListener=function(t,e,n,i){var a=o?o+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new r:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||i&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==e||i&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[a]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[a]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=o,s.EventEmitter=s,t.exports=s},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(52),o=n(35);t.exports=Object.keys||function(t){return i(t,o)}},,function(t,e,n){var i=n(6).f,o=n(7),r=n(2)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(1),o=n(4),r=n(20),a=n(34),s=n(6).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(2)},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(4),o=n(1),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(20)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var i=n(36)("keys"),o=n(26);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var i=n(11);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(117);Object.defineProperty(e,"ajax",{enumerable:!0,get:function(){return a(i).default}});var o=n(129);Object.defineProperty(e,"element",{enumerable:!0,get:function(){return a(o).default}});var r=n(116);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"tool",{enumerable:!0,get:function(){return a(r).default}})},function(t,e,n){var i=n(60);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(9),o=n(90),r=n(35),a=n(37)("IE_PROTO"),s=function(){},c=function(){var t,e=n(48)("iframe"),i=r.length;for(e.style.display="none",n(72).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;i--;)delete c.prototype[r[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:o(n,e)}},,,function(t,e,n){"use strict";e.__esModule=!0;var i,o=n(95),r=(i=o)&&i.__esModule?i:{default:i};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){var i=n(11),o=n(1).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,n){"use strict";var i=n(92)(!0);n(55)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},,function(t,e,n){var i=n(52),o=n(35).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e,n){var i=n(7),o=n(12),r=n(89)(!1),a=n(37)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;e.length>c;)i(s,n=e[c++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){t.exports=n(10)},function(t,e,n){t.exports=!n(8)&&!n(16)(function(){return 7!=Object.defineProperty(n(48)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var i=n(20),o=n(14),r=n(53),a=n(10),s=n(18),c=n(91),u=n(31),l=n(87),d=n(2)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,p,v,m,g){c(n,e,p);var _,y,b,C=function(t){if(!h&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T="values"==v,A=!1,E=t.prototype,O=E[d]||E["@@iterator"]||v&&E[v],I=O||C(v),M=v?T?C("entries"):I:void 0,x="Array"==e&&E.entries||O;if(x&&(b=l(x.call(new t)))!==Object.prototype&&b.next&&(u(b,S,!0),i||"function"==typeof b[d]||a(b,d,f)),T&&O&&"values"!==O.name&&(A=!0,I=function(){return O.call(this)}),i&&!g||!h&&!A&&E[d]||a(E,d,I),s[e]=I,s[S]=f,v)if(_={values:T?I:C("values"),keys:m?I:C("keys"),entries:M},g)for(y in _)y in E||r(E,y,_[y]);else o(o.P+o.F*(h||A),e,_);return _}},,,function(t,e,n){n(86);for(var i=n(1),o=n(10),r=n(18),a=n(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=i[u],d=l&&l.prototype;d&&!d[a]&&o(d,a,u),r[u]=r.Array}},function(t,e,n){var i=n(39);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},,,,,,function(t,e,n){var i=n(28),o=n(19),r=n(12),a=n(38),s=n(7),c=n(54),u=Object.getOwnPropertyDescriptor;e.f=n(8)?u:function(t,e){if(t=r(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(40),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){var i=n(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},,,function(t,e){},function(t,e,n){var i=n(1).document;t.exports=i&&i.documentElement},,,function(t,e,n){n(33)("observable")},function(t,e,n){n(33)("asyncIterator")},function(t,e,n){var i=n(12),o=n(51).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(i(t))}},function(t,e,n){var i=n(32);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(29),o=n(43),r=n(28);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,s=n(t),c=r.f,u=0;s.length>u;)c.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){var i=n(26)("meta"),o=n(11),r=n(7),a=n(6).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(16)(function(){return c(Object.preventExtensions({}))}),l=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!r(t,i)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return u&&d.NEED&&c(t)&&!r(t,i)&&l(t),t}}},function(t,e,n){"use strict";var i=n(1),o=n(7),r=n(8),a=n(14),s=n(53),c=n(80).KEY,u=n(16),l=n(36),d=n(31),h=n(26),f=n(2),p=n(34),v=n(33),m=n(79),g=n(78),_=n(9),y=n(11),b=n(12),C=n(38),S=n(19),T=n(44),A=n(77),E=n(66),O=n(6),I=n(29),M=E.f,x=O.f,w=A.f,k=i.Symbol,N=i.JSON,L=N&&N.stringify,P=f("_hidden"),R=f("toPrimitive"),D={}.propertyIsEnumerable,U=l("symbol-registry"),j=l("symbols"),V=l("op-symbols"),F=Object.prototype,W="function"==typeof k,B=i.QObject,H=!B||!B.prototype||!B.prototype.findChild,Y=r&&u(function(){return 7!=T(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(F,e);i&&delete F[e],x(t,e,n),i&&t!==F&&x(F,e,i)}:x,G=function(t){var e=j[t]=T(k.prototype);return e._k=t,e},q=W&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},z=function(t,e,n){return t===F&&z(V,e,n),_(t),e=C(e,!0),_(n),o(j,e)?(n.enumerable?(o(t,P)&&t[P][e]&&(t[P][e]=!1),n=T(n,{enumerable:S(0,!1)})):(o(t,P)||x(t,P,S(1,{})),t[P][e]=!0),Y(t,e,n)):x(t,e,n)},Q=function(t,e){_(t);for(var n,i=m(e=b(e)),o=0,r=i.length;r>o;)z(t,n=i[o++],e[n]);return t},J=function(t){var e=D.call(this,t=C(t,!0));return!(this===F&&o(j,t)&&!o(V,t))&&(!(e||!o(this,t)||!o(j,t)||o(this,P)&&this[P][t])||e)},X=function(t,e){if(t=b(t),e=C(e,!0),t!==F||!o(j,e)||o(V,e)){var n=M(t,e);return!n||!o(j,e)||o(t,P)&&t[P][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=w(b(t)),i=[],r=0;n.length>r;)o(j,e=n[r++])||e==P||e==c||i.push(e);return i},$=function(t){for(var e,n=t===F,i=w(n?V:b(t)),r=[],a=0;i.length>a;)!o(j,e=i[a++])||n&&!o(F,e)||r.push(j[e]);return r};W||(s((k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(V,n),o(this,P)&&o(this[P],t)&&(this[P][t]=!1),Y(this,t,S(1,n))};return r&&H&&Y(F,t,{configurable:!0,set:e}),G(t)}).prototype,"toString",function(){return this._k}),E.f=X,O.f=z,n(51).f=A.f=K,n(28).f=J,n(43).f=$,r&&!n(20)&&s(F,"propertyIsEnumerable",J,!0),p.f=function(t){return G(f(t))}),a(a.G+a.W+a.F*!W,{Symbol:k});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)f(Z[tt++]);for(var et=I(f.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!W,"Symbol",{for:function(t){return o(U,t+="")?U[t]:U[t]=k(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!W,"Object",{create:function(t,e){return void 0===e?T(t):Q(T(t),e)},defineProperty:z,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:K,getOwnPropertySymbols:$}),N&&a(a.S+a.F*(!W||u(function(){var t=k();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(y(e)||void 0!==t)&&!q(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!q(e))return e}),i[1]=e,L.apply(N,i)}}),k.prototype[R]||n(10)(k.prototype,R,k.prototype.valueOf),d(k,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,n){n(81),n(71),n(76),n(75),t.exports=n(4).Symbol},function(t,e,n){t.exports={default:n(82),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var i=n(85),o=n(84),r=n(18),a=n(12);t.exports=n(55)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(7),o=n(59),r=n(37)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(40),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=i(t))<0?o(t+e,0):r(t,e)}},function(t,e,n){var i=n(12),o=n(67),r=n(88);t.exports=function(t){return function(e,n,a){var s,c=i(e),u=o(c.length),l=r(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(6),o=n(9),r=n(29);t.exports=n(8)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),s=a.length,c=0;s>c;)i.f(t,n=a[c++],e[n]);return t}},function(t,e,n){"use strict";var i=n(44),o=n(19),r=n(31),a={};n(10)(a,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e,n){var i=n(40),o=n(39);t.exports=function(t){return function(e,n){var r,a,s=String(o(e)),c=i(n),u=s.length;return c<0||c>=u?t?"":void 0:(r=s.charCodeAt(c))<55296||r>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):r:t?s.slice(c,c+2):a-56320+(r-55296<<10)+65536}}},function(t,e,n){n(49),n(58),t.exports=n(34).f("iterator")},function(t,e,n){t.exports={default:n(93),__esModule:!0}},function(t,e,n){t.exports={default:n(128),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i,o=n(141),r=(i=o)&&i.__esModule?i:{default:i};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},,,,,,,,,function(t,e,n){"use strict";e.__esModule=!0;var i,o=n(95),r=(i=o)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(13),r=(i=o)&&i.__esModule?i:{default:i},a=n(41);var s=n(3).info.nrtcVersion,c=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t);var n=e.appkey,i=e.platform;this.apis={},this.isRtc=/WebRTC/.test(i),this.init(n,i),this.resetStatus()};e.default=c;var u=c.prototype;u.init=function(t,e){this.apis=Object.assign(this.apis,{ver:1,platform:e,sdk_ver:s||"v4.4.0",uid:null,appkey:t,time:null})},u.start=function(t){this.calling=!0,this.apis=Object.assign(this.apis,t)},u.resetStatus=function(){this.calling=!1,this.apis=Object.assign(this.apis,{p2p:{value:0},meeting:{value:0},bypass:{value:0},call_control_type:{value:0},self_mute:{value:-1},self_mic_mute:{value:-1},switch_p2p_type:{value:0},set_speaker:{value:-1},net_detect:{value:this.isRtc?-1:0},beautify:{value:-1},water_mark:{value:-1},audio_samples:{value:-1},video_samples:{value:-1},pre_view_mirror:{value:-1},code_mirror:{value:-1},custom_audio:{value:-1},custom_video:{value:-1},audio_mix:{value:-1},snap_shot:{value:-1},record:{value:0},audio_record:{value:0},display:{value:0},android_compatibility:{value:-1},hd_audio:{value:0},video_quality:{value:0},fps:{value:0},prefered_video_encoder:{value:-1},prefered_video_decoder:{value:-1},video_max_encode_bitrate:{value:this.isRtc?-1:0},audio_scene:{value:-1},video_adaptive_strategy:{value:this.isRtc?-1:0},ans:{value:this.isRtc?-1:0},agc:{value:-1},dtx:{value:-1},aec:{value:this.isRtc?-1:0},awc:{value:this.isRtc?-1:0}})},u.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=t.key,i=t.ext;t.constructor===String&&(n=t),i=i||e,this.apis[n]&&(this.apis[n].value=1,void 0!==i&&(this.apis[n].ext=i),/(p2p|meeting)/.test(n)&&(this.calling=!0))},u.send=function(){var t=this;this.calling&&(this.calling=!1,this.apis.time=Date.now(),(0,a.ajax)({type:"post",url:"https://statistic.live.126.net/statistic/realtime/sdkFunctioninfo",data:this.apis}).then(function(e){t.resetStatus()}).catch(function(e){console.log("err",e),t.resetStatus()}))},t.exports=e.default},,,,,,function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default={merge:function(){var t=arguments;return t[0]=Object.assign.apply(Object.assign,arguments),t[0]},verifyOptions:function(){var t=arguments;if(t[0]&&t[0].constructor===Object)for(var e=1;e<arguments.length;e++){var n=t[e];(n=n.split(" ")).map(function(e){if(!t[0][e])throw Error("参数缺失 "+e)})}},guid:(i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return i()+i()+i()+i()+i()+i()+i()+i()})},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t.url||!t.data)return Promise.reject("参数不完整，无法发起请求");t.dataType=t.dataType||"json";var e=new XMLHttpRequest;return e.open(t.type||"GET",t.url,!0),e.responseType=""+t.dataType,e.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.header&&Object.keys(t.header).map(function(n){e.setRequestHeader(n,t.header[n])}),new Promise(function(n,i){e.onload=function(){var t=e.response;n(t)},e.onerror=function(t){i(t)},e.send(JSON.stringify(t.data))})};t.exports=e.default},,,,,,,,,,function(t,e,n){var i=n(14);i(i.S+i.F*!n(8),"Object",{defineProperty:n(6).f})},function(t,e,n){n(127);var i=n(4).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={html2node:function(t){var e=document.createElement("div");e.innerHTML=t;var n,i,o=[];if(e.children)for(n=0,i=e.children.length;n<i;n++)o.push(e.children[n]);else for(n=0,i=e.childNodes.length;n<i;n++){var r=e.childNodes[n];1===r.nodeType&&o.push(r)}return o.length>1?e:o[0]},n2node:function(t){return t?/HTML.+Element/gi.test(t)?t:t[0]&&/HTML.+Element/gi.test(t[0])?t[0]:null:null}},t.exports=e.default},function(t,e,n){var i=n(14);i(i.S,"Object",{create:n(44)})},function(t,e,n){n(130);var i=n(4).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){t.exports={default:n(131),__esModule:!0}},function(t,e,n){var i=n(11),o=n(9),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(42)(Function.call,n(66).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){var i=n(14);i(i.S,"Object",{setPrototypeOf:n(133).set})},function(t,e,n){n(134),t.exports=n(4).Object.setPrototypeOf},function(t,e,n){t.exports={default:n(135),__esModule:!0}},function(t,e,n){"use strict";var i=n(24),o=n(15),r=i.getGlobal();function a(t,e){for(var n in e)t[n]=e[n];return t}r.Object.assign||(console.log("Object.assign polyfill"),r.Object.assign=function(){for(var t=arguments,e=1;e<t.length;e++)t[0]=a(t[0],t[e]);return t[0]}),r.platform=o},function(t,e,n){"use strict";var i=n(29),o=n(43),r=n(28),a=n(59),s=n(68),c=Object.assign;t.exports=!c||n(16)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){for(var n=a(t),c=arguments.length,u=1,l=o.f,d=r.f;c>u;)for(var h,f=s(arguments[u++]),p=l?i(f).concat(l(f)):i(f),v=p.length,m=0;v>m;)d.call(f,h=p[m++])&&(n[h]=f[h]);return n}:c},function(t,e,n){var i=n(14);i(i.S+i.F,"Object",{assign:n(138)})},function(t,e,n){n(139),t.exports=n(4).Object.assign},function(t,e,n){t.exports={default:n(140),__esModule:!0}},,,,,,,,function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(110)),o=a(n(168)),r=a(n(167));function a(t){return t&&t.__esModule?t:{default:t}}e.default={DataApi:function(t){return new i.default(t)},DataRtc:function(t){return new o.default(t)},DataStats:function(t){return new r.default(t)}},t.exports=e.default},,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(13)),o=a(n(47)),r=n(41);function a(t){return t&&t.__esModule?t:{default:t}}var s=n(3).info.nrtcVersion,c=n(15),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var n=e.appkey;this.infos={},this.init(n),this.resetStatus()}return(0,o.default)(t,[{key:"resetStatus",value:function(){}},{key:"init",value:function(t){this.infos=Object.assign(this.infos,{interval:30,ver:1,platform:l.convertPlatform(c.os.family)+"-"+c.os.version,browser:c.name+"-"+c.version,sdk_ver:s||"3.6.0",uid:null,appkey:t,time:null,data:{}})}},{key:"clear",value:function(){this.infos.data={}}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.infos.appkey=t.appKey||t.appkey||this.infos.appkey,this.infos.cid=t.cid,this.infos.uid=t.uid}},{key:"stop",value:function(){this.clear()}},{key:"update",value:function(t){this.infos.data["stat_"+Date.now()]=t,Object.keys(this.infos.data).length===this.infos.interval&&this.send()}},{key:"send",value:function(){var t=this;0!==Object.keys(this.infos.data).length&&(this.infos.time=Date.now(),(0,r.ajax)({type:"post",url:"//statistic.live.126.net/webrtc/stat",data:this.infos}).then(function(e){t.clear()}).catch(function(t){console.log("err",t)}))}}]),t}();e.default=u;var l={convertNetwork:function(t){return{wlan:"wifi",lan:"ethernet"}[t]||"unknown"},convertPlatform:function(t){var e=void 0;return e=/Windows/i.test(t)?"Win":t,e=/OS X/i.test(e)?"Mac":e}};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(13),r=(i=o)&&i.__esModule?i:{default:i},a=n(41);var s=n(3).info.nrtcVersion,c=n(15),u=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t);var n=e.appkey;this.infos={},this.userlist=[],this.localVolumn=0,this.local={},this.remote={},this.init(n),this.resetStatus()};e.default=u;var l=u.prototype;l.init=function(t){this.infos=Object.assign(this.infos,{ver:1,device:-1,isp:-1,platform:d.convertPlatform(c.os.family)+"-"+c.os.version,browser:c.name+"-"+c.version,sdk_ver:s||"3.6.0",appkey:t,interval:60,samples:30,time:null,qos_algorithm:-1,fec_algorithm:-1,qos_scene:-1,qos_strategy:-1})},l.resetStatus=function(){this.infos=Object.assign(this.infos,{uid:null,cid:null,push_url:null,turn_ip:null,proxy_ip:null,meeting:!1,live:!1}),this.clearInfoData(),this.uidSsrcMap={},this.userlist=[]},l.initInfoData=function(t){var e={uid:t,cid:this.imInfo&&this.imInfo.channelId||-1,push_url:this.sessionConfig&&this.sessionConfig.rtmpUrl||-1,turn_ip:this.imInfo&&this.imInfo.turnMap||-1,proxy_ip:this.imInfo&&this.imInfo.turnMap||-1,meeting:/^meeting$/gi.test(this.imInfo.sessionMode),live:this.sessionConfig&&this.sessionConfig.liveEnable||!1,p2p:!1,isp:-1,net:-1,connect_state:this.imInfo&&this.imInfo.code||200,signalling_time:(this.sessionConfig&&this.sessionConfig.signalEndTime||0)-(this.sessionConfig&&this.sessionConfig.signalStartTime||0),connect_time:(this.sessionConfig&&this.sessionConfig.rtcEndTime||0)-(this.sessionConfig&&this.sessionConfig.rtcStartTime||0)};this.infos=Object.assign(this.infos,e)},l.clearInfoData=function(){this.localVolumn=0,this.infos=Object.assign(this.infos,{rx:{audio:[],video:[]},tx:{a_lost:[],v_lost:[],rtt:[],rtt_mdev:[],set_v_fps:[],qos_v_fps:[],v_fps:[],set_v_quality:[],real_v_res:[],real_v_kbps:[],real_v_kbps_n:[],real_a_kbps:[],real_a_kbps_n:[],set_v_kbps:[],qos_v_kbps:[],tx_bw_kbps:[],a_volume:[]}})},l.start=function(t){var e=this,n=t.info,i=t.imInfo,o=t.remoteUidMsidMap,r=t.sessionConfig,a=t.rtcConnection,s=t.uid;i&&o&&a&&(this.infos.appkey=n.appKey||n.appkey||this.infos.appkey,this.imInfo=i||{},this.remoteUidMsidMap=o||{},this.sessionConfig=r||{},this.rtcConnection=a,this.videoConfig=t.videoConfig||{},this.statsTimer||(this.getTurnMap(),this.initInfoData(s),this.format(),this.statsTimer=setInterval(function(){e.sendInfo()},1e3*this.infos.interval)))},l.stop=function(){this.statsTimer&&(clearInterval(this.statsTimer),this.statsTimer=null,this.resetStatus())},l.update=function(t){this.rtcStats=t,this.format(),this.updateRxMediaInfo(),this.updateTxMediaInfo()},l.updateOnce=function(t){var e=t.imInfo,n=t.remoteUidMsidMap,i=t.sessionConfig,o=t.rtcConnection;e&&(this.imInfo=e||{},this.remoteUidMsidMap=n||{},this.sessionConfig=i||{},this.rtcConnection=o||{},this.videoConfig=t.videoConfig||{},this.getTurnMap(),this.initInfoData(),this.sendInfo())},l.updateLocalVolumn=function(t){this.localVolumn=t},l.updateRxMediaInfo=function(){var t=this,e={u:[],g:[],c:[],bn:[],bc:[]},n={u:[],i:[],bn:[],bc:[],r:[],f:[]};this.userlist.map(function(i){var o=t.getMediaStats(i);e.u.push(o.audio.u),e.g.push(-1),e.c.push(-1),e.bn.push(o.audio.bn),e.bc.push(o.audio.bc),n.u.push(o.video.u),n.i.push(o.video.i),n.bn.push(o.video.bn),n.bc.push(o.video.bc),n.r.push(o.video.r),n.f.push(o.video.f)}),this.infos.rx.audio.push(e),this.infos.rx.video.push(n)},l.getMediaStats=function(t){var e=this.rtcStats,n={audio:{u:+t,g:-1,c:-1,bn:0,bc:0},video:{u:+t,i:-1,bn:0,bc:0,r:-1,f:0}},i={},o=this.uidSsrcMap[t];if(!o)return n;o=o.join("|");var r=new RegExp("("+o+")");return e.results.filter(function(t){return r.test(t.ssrc)&&(i[t.mediaType]=t),r.test(t)}),i.audio&&(n.audio.bn=(i.audio.availableBandwidth||0)-0,n.audio.bc=-1),i.video&&(n.video.bn=(i.video.availableBandwidth||0)-0,n.video.bc=i.video.googFrameWidthReceived+"x"+i.video.googFrameHeightReceived,n.video.f=(i.video.googFrameRateDecoded||0)-0),n},l.getLocalMediaStats=function(){var t=this.rtcStats,e={a_lost:-1,v_lost:-1,rtt:0,rtt_mdev:-1,set_v_fps:this.videoConfig.frameRate||0,qos_v_fps:0,v_fps:0,set_v_quality:this.sessionConfig.videoQuality,real_v_res:0,real_v_kbps:0,real_v_kbps_n:0,real_a_kbps:-1,real_a_kbps_n:0,set_v_kbps:-1,qos_v_kbps:0,tx_bw_kbps:0,a_volume:0},n={},i=this.imInfo.uid,o=this.uidSsrcMap[i];if(!o)return e;o=o.join("|");var r=new RegExp("("+o+")");return t.results.filter(function(t){if(!t.localCandidateId)return r.test(t.ssrc)&&(n[t.mediaType]=t),r.test(t);n.rtt=t}),n.audio&&(e.real_a_kbps_n=(n.audio.availableBandwidth||t.audio.send.availableBandwidth)-0,e.a_volume=this.localVolumn-0),n.video&&(e.qos_v_fps=n.video.googFrameRateInput-0,e.v_fps=n.video.googFrameRateSent-0,e.real_v_res=n.video.googFrameWidthSent+"x"+n.video.googFrameHeightSent,e.real_v_kbps=n.video.googEncodeUsagePercent-0,e.real_v_kbps_n=n.video.availableBandwidth-0),e.rtt=n.rtt.googRtt-0,e.tx_bw_kbps=(t.connectionType.bitsSentPerSecond||0)-0,e},l.updateTxMediaInfo=function(){var t=this.getLocalMediaStats(),e=this.infos.tx;for(var n in t)e[n].push(t[n]);this.infos.net=d.convertNetwork(this.rtcStats.connectionType.local.networkType[0])},l.getTurnMap=function(){var t=this.imInfo;t.serverMap&&(t.turnMap=JSON.parse(t.serverMap||null),t.turnMap=t.turnMap&&t.turnMap.turnaddrs,t.turnMap=t.turnMap&&t.turnMap[0],t.turnMap=t.turnMap.constructor===Array?t.turnMap[0]:t.turnMap,t.turnMap=t.turnMap&&t.turnMap.match(/\d+\.\d+.\d+\.\d+/),t.turnMap=t.turnMap[0])},l.getSsrc=function(t,e){var n=[],i={audio:this.getTypeSsrc("audio",t,e),video:this.getTypeSsrc("video",t,e)};return i.audio&&n.push(i.audio),i.video&&n.push(i.video),n},l.getTypeSsrc=function(t,e,n){var i=void 0,o="";if(i=new RegExp(t+"[.\\r\\n\\s\\S]*ssrc:(\\d+)\\smsid:"+e),o=(o=n.match(i))&&o[0])return i=new RegExp("ssrc:\\d+\\smsid:"+e),o=(o=o.match(i)).map(function(t){return i=new RegExp("ssrc:(\\d+)\\s"),(t=t.match(i))[1]})},l.format=function(){this.formatLocal(),this.formatRemote()},l.formatLocal=function(){this.localSdp=this.rtcConnection.localDescription,this.localStream=this.rtcConnection.getLocalStreams()[0],this.localStream&&(this.uidSsrcMap[this.imInfo.uid]=this.getSsrc(this.localStream.id,this.localSdp.sdp),this.local.ssrc=this.uidSsrcMap[this.imInfo.uid])},l.formatRemote=function(){this.remoteSdp=this.rtcConnection.remoteDescription,this.userlist=[];var t=this.remoteUidMsidMap;for(var e in t)this.userlist.push(e),this.remote[e]={},this.uidSsrcMap[e]=this.getSsrc(t[e],this.remoteSdp.sdp),this.remote[e].ssrc=this.uidSsrcMap[e]},l.sendInfo=function(){var t=this;this.infos.uid&&this.infos.cid&&(this.infos.time=Date.now(),this.infos.samples=this.infos.rx.audio.length,(0,a.ajax)({type:"post",url:"https://statistic.live.126.net/statistic/realtime/sdkinfo",data:this.infos}).then(function(e){t.clearInfoData()}).catch(function(e){t.clearInfoData()}))};var d={convertNetwork:function(t){return{wlan:"wifi",lan:"ethernet"}[t]||"unknown"},convertPlatform:function(t){var e=void 0;return e=/Windows/i.test(t)?"Win":t,e=/OS X/i.test(e)?"Mac":e}};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.util;return i=e.notundef,o};var i=void 0;function o(t){i(t.enable)&&(this.enable=t.enable?1:0),i(t.needBadge)&&(this.needBadge=t.needBadge?1:0),i(t.needPushNick)&&(this.needPushNick=t.needPushNick?1:0),i(t.pushContent)&&(this.pushContent=""+t.pushContent),i(t.custom)&&(this.custom=""+t.custom),i(t.pushPayload)&&(this.pushPayload=""+t.pushPayload),i(t.sound)&&(this.sound=""+t.sound),i(t.webrtcEnable)&&(this.webrtcEnable=t.webrtcEnable?1:0)}t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,r,a=n(105),s=(i=a)&&i.__esModule?i:{default:i};var c={NETCALL_TYPE_AUDIO:1,NETCALL_TYPE_VIDEO:2,NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_ON:1,NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_OFF:2,NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_ON:3,NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_OFF:4,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO:5,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_AGREE:6,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_REJECT:7,NETCALL_CONTROL_COMMAND_SWITCH_VIDEO_TO_AUDIO:8,NETCALL_CONTROL_COMMAND_BUSY:9,NETCALL_CONTROL_COMMAND_SELF_CAMERA_INVALID:10,NETCALL_CONTROL_COMMAND_SELF_AUDIO_INVALID:11,NETCALL_CONTROL_COMMAND_SELF_ON_BACKGROUND:12,NETCALL_CONTROL_COMMAND_START_NOTIFY_RECEIVED:13,NETCALL_CONTROL_COMMAND_NOTIFY_RECORD_START:14,NETCALL_CONTROL_COMMAND_NOTIFY_RECORD_STOP:15,DEVICE_TYPE_AUDIO_IN:0,DEVICE_TYPE_AUDIO_OUT_LOCAL:1,DEVICE_TYPE_AUDIO_OUT_CHAT:2,DEVICE_TYPE_VIDEO:3,DEVICE_STATUS_NO_CHANGE:0,DEVICE_STATUS_CHANGE:1,DEVICE_STATUS_WORK_REMOVE:2,DEVICE_STATUS_RESET:4,DEVICE_STATUS_START:8,DEVICE_STATUS_END:16,CHAT_VIDEO_QUALITY_NORMAL:0,CHAT_VIDEO_QUALITY_LOW:1,CHAT_VIDEO_QUALITY_MEDIUM:2,CHAT_VIDEO_QUALITY_HIGH:3,CHAT_VIDEO_QUALITY_480P:4,CHAT_VIDEO_QUALITY_720P:5,CHAT_VIDEO_QUALITY_540P:6,CHAT_VIDEO_ENCODEMODE_NORMAL:0,CHAT_VIDEO_ENCODEMODE_SMOOTH:1,CHAT_VIDEO_ENCODEMODE_QUALITY:2,CHAT_VIDEO_ENCODEMODE_SCREEN:3,CHAT_VIDEO_FRAME_RATE_NORMAL:0,CHAT_VIDEO_FRAME_RATE_5:1,CHAT_VIDEO_FRAME_RATE_10:2,CHAT_VIDEO_FRAME_RATE_15:3,CHAT_VIDEO_FRAME_RATE_20:4,CHAT_VIDEO_FRAME_RATE_25:5,CHAT_VIDEO_SCALE_None:0,CHAT_VIDEO_SCALE_1x1:1,CHAT_VIDEO_SCALE_4x3:2,CHAT_VIDEO_SCALE_16x9:3,CHAT_USER_LEFT_TIMEOUT:-1,CHAT_USER_LEFT_NORMAL:0,CHAT_NET_STATUS_VERY_GOOD:0,CHAT_NET_STATUS_GOOD:1,CHAT_NET_STATUS_POOR:2,CHAT_NET_STATUS_BAD:3,CHAT_NET_STATUS_VERY_BAD:4,CHAT_NET_STATUS_VERY_BAD_VIDEO_CLOSE:-1,CLIENT_TYPE_AOS:1,CLIENT_TYPE_IOS:2,CLIENT_TYPE_PC:4,CLIENT_TYPE_WINPHONE:8,CLIENT_TYPE_WEB:16,CLIENT_TYPE_REST:32,LAYOUT_SPLITBOTTOMHORFLOATING:0,LAYOUT_SPLITTOPHORFLOATING:1,LAYOUT_SPLITLATTICETILE:2,LAYOUT_SPLITLATTICECUTTINGTILE:3,LAYOUT_SPLITCUSTOMLAYOUT:4,LAYOUT_SPLITAUDIOLAYOUT:5,NETDETECT_AUDIO:0,NETDETECT_VIDEO:1};c.deviceTypeMap=(o={},(0,s.default)(o,c.DEVICE_TYPE_AUDIO_IN,"audioIn"),(0,s.default)(o,c.DEVICE_TYPE_AUDIO_OUT_CHAT,"audioOut"),(0,s.default)(o,c.DEVICE_TYPE_VIDEO,"video"),o),c.getDeviceTypeStr=function(t){return c.deviceTypeMap[t]},c.deviceStatusMap=(r={},(0,s.default)(r,c.DEVICE_STATUS_NO_CHANGE,"noChange"),(0,s.default)(r,c.DEVICE_STATUS_CHANGE,"change"),(0,s.default)(r,c.DEVICE_STATUS_WORK_REMOVE,"workRemove"),(0,s.default)(r,c.DEVICE_STATUS_RESET,"reset"),(0,s.default)(r,c.DEVICE_STATUS_START,"start"),(0,s.default)(r,c.DEVICE_STATUS_END,"end"),r),c.getDeviceStatusStr=function(t){return c.deviceStatusMap[t]},e.default=c,t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";t.exports={pushConfig:{1:"enable",2:"needBadge",3:"needPushNick",4:"pushContent",5:"custom",6:"pushPayload",7:"sound",10:"webrtcEnable"},liveOption:{1:"liveEnable",2:"webrtcEnable"}}},function(t,e,n){"use strict";t.exports={pushConfig:{enable:1,needBadge:2,needPushNick:3,pushContent:4,custom:5,pushPayload:6,sound:7,webrtcEnable:10},liveOption:{liveEnable:1,webrtcEnable:2}}},function(t,e,n){"use strict";var i={netcall:{id:9,initNetcall:1,keepCalling:3,calleeAck:4,notifyCalleeAck:5,hangup:6,notifyHangup:7,netcallControl:8,notifyNetcallControl:9,verifyChannelId:10,createChannel:13,joinChannel:14,queryAccountUidMap:16}},o={initNetcall:{sid:9,cid:i.netcall.initNetcall,params:[{type:"byte",name:"type"},{type:"StrArray",name:"accounts"},{type:"String",name:"pushContent"},{type:"String",name:"custom"},{type:"Property",name:"pushConfig"}]},keepCalling:{sid:9,cid:i.netcall.keepCalling,params:[{type:"byte",name:"type"},{type:"StrArray",name:"accounts"},{type:"long",name:"channelId"}]},calleeAck:{sid:9,cid:i.netcall.calleeAck,params:[{type:"string",name:"account"},{type:"long",name:"channelId"},{type:"byte",name:"type"},{type:"bool",name:"accepted"}]},hangup:{sid:9,cid:i.netcall.hangup,params:[{type:"long",name:"channelId"}]},netcallControl:{sid:9,cid:i.netcall.netcallControl,params:[{type:"long",name:"channelId"},{type:"byte",name:"type"}]},verifyChannelId:{sid:9,cid:i.netcall.verifyChannelId,params:[{type:"long",name:"channelId"},{type:"String",name:"account"}]},createChannel:{sid:9,cid:i.netcall.createChannel,params:[{type:"String",name:"channelName"},{type:"String",name:"custom"},{type:"String",name:"webrtcEnable"}]},joinChannel:{sid:9,cid:i.netcall.joinChannel,params:[{type:"String",name:"channelName"},{type:"Property",name:"liveOption"}]},queryAccountUidMap:{sid:9,cid:i.netcall.queryAccountUidMap,params:[{type:"String",name:"channelName"},{type:"LongArray",name:"uids"}]}},r={"9_1":{service:"netcall",cmd:"initNetcall",response:[{type:"Number",name:"timetag"},{type:"Number",name:"uid"},{type:"Number",name:"channelId"},{type:"StrArray",name:"turnServerList"},{type:"StrArray",name:"sturnServerList"},{type:"StrArray",name:"proxyServerList"},{type:"StrArray",name:"keepCallingAccounts"},{type:"StrLongMap",name:"accountUidMap"},{type:"String",name:"clientConfig"},{type:"String",name:"serverMap"}]},"9_2":{service:"netcall",cmd:"beCalled",response:[{type:"Number",name:"timetag"},{type:"Number",name:"type"},{type:"Number",name:"channelId"},{type:"String",name:"account"},{type:"Number",name:"uid"},{type:"StrArray",name:"turnServerList"},{type:"StrArray",name:"sturnServerList"},{type:"StrArray",name:"proxyServerList"},{type:"StrLongMap",name:"accountUidMap"},{type:"String",name:"clientConfig"},{type:"String",name:"custom"},{type:"Property",name:"pushConfig"},{type:"String",name:"serverMap"}]},"9_3":{service:"netcall",cmd:"keepCalling",response:[{type:"StrArr",name:"accounts"}]},"9_4":{service:"netcall",cmd:"calleeAck",response:[]},"9_5":{service:"netcall",cmd:"notifyCalleeAck",response:[{type:"String",name:"account"},{type:"long",name:"channelId"},{type:"byte",name:"type"},{type:"bool",name:"accepted"}]},"9_6":{service:"netcall",cmd:"hangup",response:[]},"9_7":{service:"netcall",cmd:"notifyHangup",response:[{type:"long",name:"channelId"},{type:"String",name:"account"},{type:"long",name:"timetag"}]},"9_8":{service:"netcall",cmd:"netcallControl",response:[]},"9_9":{service:"netcall",cmd:"notifyNetcallControl",response:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"long",name:"channelId"}]},"9_10":{service:"netcall",cmd:"verifyChannelId",response:[]},"9_11":{service:"netcall",cmd:"notifyNetcallRecord",response:[{type:"Property",name:"msg"}]},"9_12":{service:"netcall",cmd:"notifyCalleeAckSync",response:[{type:"String",name:"timetag"},{type:"long",name:"channelId"},{type:"byte",name:"type"},{type:"bool",name:"accepted"},{type:"byte",name:"fromClientType"}]},"9_13":{service:"netcall",cmd:"createChannel",response:[{type:"long",name:"timetag"}]},"9_14":{service:"netcall",cmd:"joinChannel",response:[{type:"long",name:"timetag"},{type:"long",name:"channelId"},{type:"StrLongMap",name:"accountUidMap"},{type:"String",name:"serverMap"},{type:"String",name:"clientConfig"},{type:"String",name:"custom"}]},"9_15":{service:"netcall",cmd:"notifyJoin",response:[{type:"Long",name:"channelId"},{type:"StrLongMap",name:"accountUidMap"}]},"9_16":{service:"netcall",cmd:"queryAccountUidMap",response:[]}};t.exports={idMap:i,cmdConfig:o,packetConfig:r}},function(t,e,n){"use strict";var i={install:function(t){var e=t.Protocol.fn;e.processNetcall=function(t){switch(t.cmd){case"initNetcall":this.onInitNetcall(t);break;case"beCalled":this.onBeCalled(t);break;case"keepCalling":this.onKeepCalling(t);break;case"calleeAck":break;case"notifyCalleeAck":this.onNotifyCalleeAck(t);break;case"hangup":break;case"notifyHangup":this.onNotifyHangup(t);break;case"notifyNetcallControl":this.onNetcallControl(t);break;case"notifyCalleeAckSync":this.onNotifyCalleeAckSync(t);break;case"notifyNetcallRecord":this.onMsg(t);break;case"createChannel":break;case"joinChannel":this.joinChannel(t);break;case"notifyJoin":this.notifyJoin(t)}},e.onInitNetcall=function(t){if(!t.error){var e=t.obj.type;t.obj=t.content,t.obj.type=e,t.obj.accounts=t.obj.keepCallingAccounts,this.setCurrentNetcall(t.obj.channelId),this.keepCalling(t)}},e.setCurrentNetcall=function(t){this.currentNetcallChannelId=t},e.onKeepCalling=function(t){t.error||t.content.accounts.length&&this.keepCalling(t)},e.keepCalling=function(t){var e=this,n=t.obj,i=n.type,o=n.accounts,r=n.channelId;o&&o.length&&setTimeout(function(){e.currentNetcallChannelId&&e.currentNetcallChannelId===r&&e.api.keepCalling({type:i,accounts:o,channelId:r}).catch(function(){})},3e3)},e.onBeCalled=function(t){t.error||this.emitAPI({type:"beCalled",obj:t.content})},e.onNotifyCalleeAck=function(t){t.error||this.emitAPI({type:"notifyCalleeAck",obj:t.content})},e.onNotifyHangup=function(t){t.error||this.emitAPI({type:"notifyHangup",obj:t.content})},e.onNetcallControl=function(t){t.error||this.emitAPI({type:"netcallControl",obj:t.content})},e.onNotifyCalleeAckSync=function(t){t.error||this.emitAPI({type:"notifyCalleeAckSync",obj:t.content})},e.notifyJoin=function(t){t.error||this.emitAPI({type:"notifyJoin",obj:t.content})},e.joinChannel=function(t){t.obj=t.content}}};t.exports=i},function(t,e,n){"use strict";var i=n(169),o={install:function(t){var e=t.fn,n=t.util,o=i({util:n});e.initNetcall=function(t){return n.verifyOptions(t,"type accounts","netcall::initNetcall"),t.pushContent="",t.custom="",t.pushConfig||(t.pushConfig={}),t.pushConfig.webrtcEnable=t.webrtcEnable,t.pushConfig=new o(t.pushConfig),this.cbAndSendCmd("initNetcall",t)},e.keepCalling=function(t){return n.verifyOptions(t,"type accounts channelId","netcall::keepCalling"),this.cbAndSendCmd("keepCalling",t)},e.calleeAck=function(t){return n.verifyOptions(t,"account channelId type accepted","netcall::calleeAck"),this.cbAndSendCmd("calleeAck",t)},e.hangup=function(t){return n.verifyOptions(t,"channelId","netcall::hangup"),this.cbAndSendCmd("hangup",t)},e.netcallControl=function(t){return n.verifyOptions(t,"channelId type","netcall::netcallControl"),this.cbAndSendCmd("netcallControl",t)},e.createChannel=function(t){return this.cbAndSendCmd("createChannel",t)},e.joinChannel=function(t){return n.verifyOptions(t,"channelName","netcall::joinChannel"),n.verifyBooleanWithDefault(t,"liveEnable",!1,"","netcall::joinChannel"),n.verifyBooleanWithDefault(t,"webrtcEnable",!1,"","netcall::joinChannel"),this.cbAndSendCmd("joinChannel",{channelName:t.channelName,liveOption:{liveEnable:t.liveEnable?1:0,webrtcEnable:t.webrtcEnable?1:0}})},e.queryAccountUidMap=function(t,e){return this.cbAndSendCmd("queryAccountUidMap",{channelName:t,uids:e})}}};t.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=a(n(13)),o=a(n(22)),r=a(n(21));function a(t){return t&&t.__esModule?t:{default:t}}var s=void 0,c=n(25),u=n(352),l=n(371),d=n(370),h=function(t){function e(t){(0,i.default)(this,e);var n=(0,o.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.merge(n,t),n.init(),n}return(0,r.default)(e,t),e}(c);h.install=function(t){s=t.util};var f=h.prototype;f.init=function(){this.reset()},f.reset=function(){this.width=0,this.height=0},f.initCanvas=function(t){s.merge(this,t);var e=this.container||document.body,n=this.canvas;n||(n=this.canvas=document.createElement("canvas"),e.appendChild(n)),n.width=this.width,n.height=this.height;var i=this.gl;if(i||(i=this.gl=u.getWebGLContext(n)),i)i.viewport(0,0,this.width,this.height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),u.initShaders(i,l,d),this.initBuffer(i),this.initTextures(i);else{this.emit("error",{code:"notSupportWebGl"})}},f.initBuffer=function(t){this.positionLocation=t.getAttribLocation(t.program,"a_position"),this.texCoordLocation=t.getAttribLocation(t.program,"a_texCoord"),this.texCoordBuffer=t.createBuffer()},f.initTextures=function(t){this.yTexture=this.createTexture(t.TEXTURE0),this.uTexture=this.createTexture(t.TEXTURE1),this.vTexture=this.createTexture(t.TEXTURE2);var e=t.getUniformLocation(t.program,"Ytex");t.uniform1i(e,0);var n=t.getUniformLocation(t.program,"Utex");t.uniform1i(n,1);var i=t.getUniformLocation(t.program,"Vtex");t.uniform1i(i,2)},f.createTexture=function(t){var e=this.gl,n=e.createTexture();return e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),n},f.destroyTextures=function(){var t=this.gl;t&&(t.deleteTexture(this.yTexture),t.deleteTexture(this.uTexture),t.deleteTexture(this.vTexture)),this.yTexture=null,this.uTexture=null,this.vTexture=null},f.destroyBuffer=function(){var t=this.gl;t&&this.texCoordBuffer&&t.deleteBuffer(this.texCoordBuffer),this.texCoordBuffer=null},f.updateShaders=function(){var t=this.gl,e=void 0;e=this.mirror?new Float32Array([-1,1,1,0,-1,-1,1,1,1,1,0,0,1,-1,0,1]):new Float32Array([-1,1,0,0,-1,-1,0,1,1,1,1,0,1,-1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var n=e.BYTES_PER_ELEMENT;t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,4*n,0),t.vertexAttribPointer(this.texCoordLocation,2,t.FLOAT,!1,4*n,2*n),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.texCoordLocation)},f.updateTextures=function(t){var e=t.y,n=t.u,i=t.v,o=this.gl,r=this.width,a=this.height;this.updateTexture(o.TEXTURE0,this.yTexture,e,r,a),this.updateTexture(o.TEXTURE1,this.uTexture,n,r/2,a/2),this.updateTexture(o.TEXTURE2,this.vTexture,i,r/2,a/2),o.finish()},f.updateTexture=function(t,e,n,i,o){var r=this.gl;r.activeTexture(t),r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i,o,0,r.LUMINANCE,r.UNSIGNED_BYTE,n)},f.drawImage=function(t){if(!this.destroyed){var e=t.width,n=t.height,i=t.y,o=t.u,r=t.v;e===this.width&&n===this.height||(this.width=e,this.height=n,this.clean(),this.initCanvas({width:e,height:n}),this.emit("resize",{width:e,height:n,isRemote:this.isRemote,container:this.container})),this.updateShaders(),this.updateTextures({y:i,u:o,v:r});var a=this.gl;a.drawArrays(a.TRIANGLE_STRIP,0,4)}},f.destroy=function(){this.destroyed||(this.destroyed=!0,this.clean(),this.reset())},f.clean=function(){this.destroyTextures(),this.destroyBuffer(),this.removeGl()},f.removeGl=function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null,this.canvasInited=!1,this.gl=null},t.exports=h},function(t,e,n){"use strict";var i=l(n(96)),o=l(n(13)),r=l(n(22)),a=l(n(21)),s=n(41),c=n(155),u=l(n(376));function l(t){return t&&t.__esModule?t:{default:t}}var d=void 0,h=n(25),f=n(375),p=n(3),v=n(374),m=n(372),g=n(350),_=n(208),y=p.agentVersion,b=function(t){function e(t){(0,o.default)(this,e);var n=(0,r.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.container=s.element.n2node(t.container),t.remoteContainer=s.element.n2node(t.remoteContainer),n.setUtil(d),d.undef(t.heartbeat)&&(t.heartbeat=!0),d.merge(n,t),n.init(),n}return(0,a.default)(e,t),e}(h);b.install=function(t){d=t.util,v.install(t),m.install(t),g.install(t)};var C=b.prototype;C.init=function(){this.signal=null,this.signalInited=!1,this.localStreamInfo=null,this.resetStatus(),this.initProtocol(),this.dataApi=(0,c.DataApi)({appkey:this.nim.options.appKey,platform:"PC-Agent"})},C.resetStatus=function(){this.channelId=null,this.channelName=null,this.type=null,this.target=null,this.sessionMode=null,this.sessionConfig={},this.isCaller=!1,this.callee=null,this.remoteStreamInfo={},this.calling=!1,this.callAccepted=!1,this.callerInfo=null,this.nim.protocol.setCurrentNetcall(),this.needQueryAccountMap={}},C.initProtocol=function(){var t=this.nim;this.account=this.nim.account,t.on("beCalled",this.onBeCalled.bind(this)),t.on("notifyCalleeAck",this.onCalleeAck.bind(this)),t.on("notifyHangup",this.onHangup.bind(this)),t.on("notifyUploadLog",this.uploadLog.bind(this)),t.on("netcallControl",this.onNetcallControl.bind(this)),t.on("notifyCalleeAckSync",this.onCalleeAckSync.bind(this)),t.on("notifyJoin",this.onNotifyJoin.bind(this))},C.getAccount=function(){return this.nim.account},C.getUid=function(){return this.accountUidMap&&this.accountUidMap[this.nim.account]||"-1"},C.isCurrentChannelId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.channelId&&this.channelId===t.channelId},C.notCurrentChannelId=function(t){return!this.isCurrentChannelId(t)},C.rejectWithNoSignal=function(){return this.resetWhenHangup(),Promise.reject({code:"noConnection"})},C.initSignal=function(){var t=this;return this.signal?this.stopSignal().then(function(){return t._initSignal()}):this._initSignal()},C._initSignal=function(){var t=this;return new Promise(function(e,n){var i=t.signal=new v({url:f.signalUrl,client:t,kickLast:t.kickLast,account:t.getAccount(),heartbeat:t.heartbeat,appkey:t.nim.options.appKey});i.on("init",function(i){if(t.log(i),!t.checkAgentVersion(i.version))return t.log("插件版本有更新，请下载最新的插件再使用音视频功能"),t.stopSignal(),i.error="请安装最新版插件，方可使用视频功能",i.errorType="agent_update",void n(i);t.localStreamInfo=i,t.signalInited=!0,e()}),i.on("initError",function(e){t.log(e),417===(e=e||{}).code&&(e.error="设备被别的程序占用中, 请检查重试",e.errorType="device_busy"),"noPC"===e.code&&(e.error="请安装插件PC Agent，方可使用音视频功能",e.errorType="agent_empty"),n(e),t.rejectWithNoSignal()}),i.on("close",function(){t.emit("signalClosed"),t.stopSignal()}),i.on("devices",function(e){t.emit("devices",e)}),i.on("login",function(e){t.emit("sessionStarted",e)}),i.on("deviceStatus",function(e){t.emit("deviceStatus",e)}),i.on("userJoined",t.onUserJoin.bind(t)),i.on("userLeft",t.onUserLeft.bind(t)),i.on("logUploaded",t.onLogUploaded.bind(t)),i.on("netStatus",function(e){var n=e.id,i=e.status;t.emit("netStatus",{account:t.getAccountWithUid(n),status:i})}),i.on("statistics",function(e){t.emit("statistics",e)}),i.on("audioVolume",function(e){var n=e.self,i=e.receiver,o={self:n};i&&i.forEach(function(e){var n=e.id,i=e.status;o[t.getAccountWithUid(n)]={status:i}}),t.emit("audioVolume",o)}),i.on("error",t.onError.bind(t)),i.on("recordMp4",t.onRecordMp4.bind(t)),i.on("heartBeatError",t.onError.bind(t))})},C.checkAgentVersion=function(){for(var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.0.0.0").split("."),e=y.split("."),n=0;n<t.length;n++){if(+t[n]>+e[n])return!0;if(+t[n]<+e[n])return!1}return!0},C.stopSignal=function(){var t=this;return this.stopLocalStream(),this.stopRemoteStream(),this.signal?this.signal.stopSession().then(function(){t.signal.destroy(),t.signal=null,t.signalInited=!1}):Promise.resolve()},C.initNetcall=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,i=e.pushConfig;return this.type=n,this.sessionMode="p2p",this.nim.initNetcall({type:n,accounts:[this.callee],webrtcEnable:!0,pushConfig:i}).then(function(e){return t.callerInfo=e,t.channelId=e.channelId,Promise.resolve(e)},function(e){throw t.resetWhenHangup(),e})},C.initSession=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.signalInited){var n=this.isCaller?this.callerInfo:e.beCalledInfo;this.parseAccountUidMap(n.accountUidMap);var o=this.sessionConfig||{};return o.awc&&this.dataApi.update({key:"awc"}),o.ans&&this.dataApi.update({key:"ans"}),o.aec&&this.dataApi.update({key:"aec"}),this.signal.startSession((0,i.default)({},n,o)).then(function(){return{channelId:t.channelId}})}return this.rejectWithNoSignal()},C.call=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dataApi.update("p2p"),new Promise(function(n,i){if(!t.signalInited||t.calling)return t.resetStatus(),i({type:"statusNotMatch",error:"呼叫失败: 当前正在通话中或者Agent唤起失败，请排查"});var o=e.account,r=e.type,a=e.pushConfig,s=e.sessionConfig,c=void 0===s?{}:s;if(t.calling=!0,t.isCaller=!0,t.callee=t.target=o,t.sessionConfig=c,c.highAudio&&t.dataApi.update("hd_audio"),void 0!==c.videoFrameRate&&t.dataApi.update("fps",0==+c.videoFrameRate?0:+c.videoFrameRate+1),void 0!==c.videoEncodeMode&&t.dataApi.update("video_adaptive_strategy",c.videoEncodeMode||0),void 0!==c.videoBitrate&&t.dataApi.update("video_max_encode_bitrate",c.videoBitrate||""),void 0!==c.videoQuality){var u=c.videoQuality;u===_.CHAT_VIDEO_QUALITY_540P?u=_.CHAT_VIDEO_QUALITY_720P:u===_.CHAT_VIDEO_QUALITY_720P&&(u=_.CHAT_VIDEO_QUALITY_540P),t.dataApi.update("video_quality",u||0)}if(o)return t.initNetcall({type:r,pushConfig:a}).then(function(t){n(t)}).catch(function(t){i(t)});t.resetStatus(),i({code:"noCalleeAccount"})})},C.onBeCalled=function(t){this.log("beCalling",t),this.emit("beCalling",t)},C.response=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dataApi.update("p2p");var n=e.beCalledInfo;if(!n)return Promise.resolve();var i=n.accepted=!1!==e.accepted,o=this.sessionConfig=e.sessionConfig||{};if(o.highAudio&&this.dataApi.update("hd_audio"),void 0!==o.videoFrameRate&&this.dataApi.update("fps",0==+o.videoFrameRate?0:+o.videoFrameRate+1),void 0!==o.videoEncodeMode&&this.dataApi.update("video_adaptive_strategy",o.videoEncodeMode||0),void 0!==o.videoBitrate&&this.dataApi.update("video_max_encode_bitrate",o.videoBitrate||""),void 0!==o.videoQuality){var r=o.videoQuality;r===_.CHAT_VIDEO_QUALITY_540P?r=_.CHAT_VIDEO_QUALITY_720P:r===_.CHAT_VIDEO_QUALITY_720P&&(r=_.CHAT_VIDEO_QUALITY_540P),this.dataApi.update("video_quality",r||0)}return i?(this.type=n.type,this.channelId=n.channelId,this.target=n.account,this.calling=!0):(this.log("rejectNetcall",n),this.packNetcallRecord({type:n.type,channelId:n.channelId,isCaller:!1,target:n.account,recordType:"rejectNetcall"})),this.sessionMode="p2p",this.nim.calleeAck(n).then(function(){if(i)return t.initSession({beCalledInfo:n})},function(e){throw t.log(e),e})},C.onCalleeAck=function(t){if(!this.notCurrentChannelId(t))return t.accepted?this.initSession({type:t.type}):(this.log("netcallRejected",t),this.packNetcallRecord({type:t.type,channelId:t.channelId,isCaller:!0,target:t.account,recordType:"netcallRejected"}),this.resetWhenHangup(),void this.emit("callRejected",t))},C.onUserJoin=function(t){this.log("onUserJoin ",t);var e=t.account,n=t.uid;!e&&n&&(t.account=e=this.getAccountWithUid(n)),e?this.emitUserJoin(t):(this.needQueryAccountMap[n]=t,this.nim.queryAccountUidMap(this.channelName,[n]))},C.emitUserJoin=function(t){var e=t.uid,n=t.isMeeting;this.remoteStreamInfo[e]=t,this.dataApi.start({uid:this.getUid()}),n?this.emit("joinChannel",{type:t.type,uid:t.uid,account:t.account}):(this.callAccepted||(this.callAccepted=!0),this.emit("callAccepted",{type:t.type,account:t.account,uid:t.uid}))},C.onUserLeft=function(t){var e=this,n=t.account,i=t.uid;t.isMeeting?(!n&&i&&(t.account=this.getAccountWithUid(i)),this.emit("leaveChannel",{account:t.account})):(this.log("on user left",t),this.calling&&setTimeout(function(){t.account=e.getAccountWithUid(t.uid),e.onHangup(t)},1e3))},C.onNetcallControl=function(t){this.emit("control",t)},C.onCalleeAckSync=function(t){this.emit("callerAckSync",t),this.isCurrentChannelId(t)&&this.resetWhenHangup()},C.onNotifyJoin=function(t){var e=t.accountUidMap,n=this.needQueryAccountMap;for(var i in this.parseAccountUidMap(e),e){var o=i,r=e[i];if(r in n){var a=n[r];a.account=o,this.emitUserJoin(a),delete n[r]}}},C.onHangup=function(t){this.dataApi.send(),this.emit("hangup",t),this.isCurrentChannelId(t)&&this.resetWhenHangup()},C.hangup=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).channelId;!t&&this.calling&&this.channelId&&(t=this.channelId),t&&(this.dataApi.send(),this.nim.hangup({channelId:t})),t===this.channelId&&(this.isCaller&&!this.callAccepted&&(this.log("cancelNetcallBeforeAccept",{channelId:t}),this.packNetcallRecord({recordType:"cancelNetcallBeforeAccept"})),this.resetWhenHangup())},C.packNetcallRecord=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.recordType,n=d.exist(t.type)?t.type:this.type,i=d.exist(t.channelId)?t.channelId:this.channelId,o=d.exist(t.duration)?t.duration:0,r=d.exist(t.isCaller)?t.isCaller:this.isCaller,a=d.exist(t.target)?t.target:this.target,s=this.getAccount(),c=r?s:a,u=r?a:s,l=+new Date;this.nim.protocol.onMsg({content:{msg:{attach:JSON.stringify({data:{calltype:n,channel:i,duration:o,ids:[s,a],time:l},id:e}),from:c,fromClientType:r?16:0,fromDeviceId:"",fromNick:"",idClient:d.guid(),idServer:d.guid(),scene:0,time:l,to:u,type:5}}})},C.resetWhenHangup=function(){this.resetStatus(),this.signalInited&&this.signal.stopSession()},C.control=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.command,i=e.channelId;if(i||(i=this.channelId),n&&i)return this.dataApi.update("call_control_type"),this.nim.netcallControl({channelId:i,type:n}).catch(function(e){throw t.log(e),e})},C.setVideoViewSize=function(t){return this.signalInited?this.signal.setVideoViewSize(t):this.rejectWithNoSignal()},C.setVideoViewRemoteSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.signalInited?(t.account&&(t.id=this.getUidWithAccount(t.account)),this.signal.setVideoViewRemoteSize(t)):this.rejectWithNoSignal()},C.setVideoScale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.signalInited?(t.account&&(t.id=this.getUidWithAccount(t.account)),this.signal.setVideoScale(t)):this.rejectWithNoSignal()},C.startLocalStream=function(t){var e=this;if(this.dataApi.update("display"),this.signalInited&&!this.stream&&this.localStreamInfo){var n=t||this.container,i=this.localStreamInfo.port;this.stream=new m({client:this,url:f.genStreamUrl(i),container:n,mirror:this.mirror}),this.stream.on("resize",function(t){e.emit("streamResize",t)}),this.stream.on("error",function(t){e.emit("error",t)})}},C.stopLocalStream=function(){this.stream&&(this.stream.destroy(),this.stream=null)},C.startRemoteStream=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"p2p"===this.sessionMode?(t=this.getUidWithAccount(this.target),this.remoteContainer||this.target||this.nim.logger.error("不传参数且点对点模式实例化Netcall必须设置remoteContainer与target；传参数必须包含account，node"),!this.getRemoteStream(t)&&this.remoteStreamInfo[t]&&this.addRemoteStream(this.remoteStreamInfo[t])):(t=e.uid||this.getUidWithAccount(e.account),e.node=s.element.n2node(e.node),t&&e.node?this.addRemoteStream(this.remoteStreamInfo[t],e.node):this.nim.logger.error("不传参数且点对点模式实例化Netcall必须设置remoteContainer与target；传参数必须包含account，node"))},C.stopRemoteStream=function(t){return t?this.removeRemoteStream(t):this.removeRemoteStreams()},C.addRemoteStream=function(t,e){var n=this,i=t.uid,o=t.port;this.remoteStreams||(this.remoteStreams={});var r=this.remoteStreams[i];r&&r.destroy(),(r=this.remoteStreams[i]=new m({client:this,isRemote:!0,url:f.genStreamUrl(o),container:e||this.remoteContainer,mirror:this.mirrorRemote})).on("resize",function(t){n.emit("remoteStreamResize",t)}),r.on("error",function(t){n.emit("error",t)})},C.removeRemoteStreams=function(){var t=this;this.remoteStreams&&Object.keys(this.remoteStreams).forEach(function(e){t.remoteStreams[e].destroy()}),this.remoteStreams={}},C.removeRemoteStream=function(t){var e=this.getUidWithAccount(t);if(!this.remoteStreams[e]){throw{code:"accountNotMatch"}}this.remoteStreams[e].destroy()},C.getRemoteStream=function(t){var e=this.getUidWithAccount(t);return this.remoteStreams&&this.remoteStreams[e]},C.suspendLocalStream=function(){this.stream&&this.stream.suspend()},C.resumeLocalStream=function(){this.stream&&this.stream.resume()},C.suspendRemoteStream=function(t){var e=this.getRemoteStream(t||this.target);e&&e.suspend()},C.resumeRemoteStream=function(t){var e=this.getRemoteStream(t||this.target);e&&e.resume()},C.switchVideoToAudio=function(){var t=this;return this.signalInited?(this.dataApi.update("switch_p2p_type"),this.signal.switchVideoToAudio().then(function(){t.type=_.NETCALL_TYPE_AUDIO})):this.rejectWithNoSignal()},C.switchAudioToVideo=function(){var t=this;return this.signalInited?(this.dataApi.update("switch_p2p_type"),this.signal.switchAudioToVideo().then(function(){t.type=_.NETCALL_TYPE_VIDEO})):this.rejectWithNoSignal()},C.getDevicesOfType=function(t){return this.signalInited?this.signal.getDevicesOfType(t):this.rejectWithNoSignal()},C.getStoredDevicesOfType=function(t){if(this.signalInited)return(t=+t)===_.DEVICE_TYPE_AUDIO_OUT_LOCAL&&(t=_.DEVICE_TYPE_AUDIO_OUT_CHAT),this.signal.devicesMap[t];this.rejectWithNoSignal()},C.hasDevicesOfType=function(t){return this.getStoredDevicesOfType(t)},C.getStartedDeviceOfType=function(t){return this.signalInited?this.signal.deviceMap[t]:this.rejectWithNoSignal()},C.hasStartedDeviceOfType=function(t){return this.getStartedDeviceOfType(t)},C.stopDevice=function(t){return this.signalInited?this.hasStartedDeviceOfType(t)?this.signal.stopDevice(t):Promise.resolve():this.rejectWithNoSignal()},C.startDevice=function(t){var e=t.type,n=t.device;if(this.signalInited){if(d.exist(e)&&!n){if(this.hasStartedDeviceOfType(e))return Promise.resolve();this.hasDevicesOfType(e)&&(n=t.device=this.getStoredDevicesOfType(e)[0])}return n?this.signal.startDevice(t):Promise.reject((0,i.default)({type:"noDevice"},t))}return this.rejectWithNoSignal()},C.setSessionVideoQuality=function(t){if(this.signalInited){if(void 0!==t){var e=t;e===_.CHAT_VIDEO_QUALITY_540P?e=_.CHAT_VIDEO_QUALITY_720P:e===_.CHAT_VIDEO_QUALITY_720P&&(e=_.CHAT_VIDEO_QUALITY_540P),this.dataApi.update("video_quality",e||0)}return this.signal.setVideoQuality(t)}return this.rejectWithNoSignal()},C.setSessionVideoFrameRate=function(t){return this.signalInited?(this.dataApi.update("fps",void 0!==t?+t+1:0),this.signal.setVideoFrameRate(t)):this.rejectWithNoSignal()},C.setSessionVideoBitrate=function(t){return this.signalInited?(this.dataApi.update("video_max_encode_bitrate",t||""),this.signal.setVideoBitrate(t)):this.rejectWithNoSignal()},C.setCaptureVolume=function(t){return(t=void 0===t?255:t).constructor===String&&(t=+t||255),this.signalInited?this.signal.setCaptureVolume(t):this.rejectWithNoSignal()},C.setPlayVolume=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};/(Number|String)/.test(t.constructor)&&(t={volume:t});var e=t.volume;return e=void 0===e?255:e,this.signalInited?this.signal.setPlayVolume(e):this.rejectWithNoSignal()},C.netDetect=function(t,e){return this.dataApi.update({key:"net_detect"}),t=void 0===t?_.NETDETECT_AUDIO:t,e=e||_.CHAT_VIDEO_QUALITY_480P,this.signalInited?this.signal.netDetect({appKey:this.nim.options.appKey,type:t,quality:e}):this.rejectWithNoSignal()},C.uploadLog=function(){var t=this;this.signalInited&&this.nim.getSimpleNosToken().then(function(e){t.signal.uploadLog(e)},function(e){t.log(e)})},C.onLogUploaded=function(t){this.nim.uploadSdkLogUrl(t)},C.log=function(){var t=this.nim.logger;t.log.apply(t,arguments)},C.info=function(){var t=this.nim.logger;t.info.apply(t,arguments)},C.destroy=function(){},C=Object.assign(C,u.default),t.exports=b,n(368)},function(t,e,n){"use strict";var i={},o=i.create3DContext=function(t,e){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null,o=0;o<n.length;++o){try{i=t.getContext(n[o],e)}catch(t){}if(i){console.log("use",n[o]);break}}return i};i.initShaders=function(t,e,n){var i=r(t,e,n);return i?(t.useProgram(i),t.program=i,!0):(console.log("Failed to create program"),!1)};var r=i.createProgram=function(t,e,n){var i=a(t,t.VERTEX_SHADER,e),o=a(t,t.FRAGMENT_SHADER,n);if(!i||!o)return null;var r=t.createProgram();if(!r)return null;if(t.attachShader(r,i),t.attachShader(r,o),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var s=t.getProgramInfoLog(r);return console.log("Failed to link program: "+s),t.deleteProgram(r),t.deleteShader(o),t.deleteShader(i),null}return r},a=i.loadShader=function(t,e,n){var i=t.createShader(e);return null==i?(console.log("unable to create shader"),null):(t.shaderSource(i,n),t.compileShader(i),i)};i.getWebGLContext=function(t,e){var n=o(t);return n||null},window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout),t.exports=i},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,o=n(96),r=(i=o)&&i.__esModule?i:{default:i};var a=n(351),s=n(208),c=a.prototype,u=void 0;c.setUtil=function(t){u=t},c.createChannel=function(t){return u.verifyOptions(t,"channelName"),t.custom=t.custom||"",this.dataApi.update("meeting"),t.webrtcEnable=!0,this.nim.createChannel(t)},c.joinChannel=function(t){var e=this;this.dataApi.update("meeting"),u.verifyOptions(t,"channelName type");var n=t.type,i=t.sessionConfig,o=void 0===i?{}:i;if(o.bypassRtmp=t.liveEnable,o.customLayout=t.layout||t.customLayout,t.liveEnable&&this.dataApi.update("bypass",void 0!==o.splitMode?+o.splitMode+1:0),o.highAudio&&this.dataApi.update("hd_audio"),void 0!==o.videoFrameRate&&this.dataApi.update("fps",0==+o.videoFrameRate?0:+o.videoFrameRate+1),void 0!==o.videoEncodeMode&&this.dataApi.update("video_adaptive_strategy",o.videoEncodeMode||0),void 0!==o.videoBitrate&&this.dataApi.update("video_max_encode_bitrate",o.videoBitrate||""),void 0!==o.videoQuality){var a=o.videoQuality;a===s.CHAT_VIDEO_QUALITY_540P?a=s.CHAT_VIDEO_QUALITY_720P:a===s.CHAT_VIDEO_QUALITY_720P&&(a=s.CHAT_VIDEO_QUALITY_540P),this.dataApi.update("video_quality",a||0)}if(o.awc&&this.dataApi.update({key:"awc"}),o.ans&&this.dataApi.update({key:"ans"}),o.aec&&this.dataApi.update({key:"aec"}),this.signalInited)return this.nim.joinChannel({channelName:t.channelName,liveEnable:t.liveEnable,webrtcEnable:!0}).then(function(i){return i.serverInfo=JSON.parse(i.serverMap),e.callerInfo=i,e.channelId=i.channelId,e.channelName=t.channelName,e.sessionMode="meeting",e.parseAccountUidMap(i.accountUidMap),i.uid=e.getUidWithAccount(e.account),e.dataApi.start({uid:i.uid}),e.signal.startSession((0,r.default)({},i,{type:n},t.sessionConfig),!0).then(function(t){return t.custom=i.custom,t})});return Promise.reject({code:"noConnection"})},c.leaveChannel=function(){if(this.signalInited)return this.dataApi.send(),this.signal.stopSession();return Promise.reject({code:"noConnection"})},c.changeRoleToPlayer=function(){return this.signal.setRole(0)},c.changeRoleToAudience=function(){return this.signal.setRole(1)},c.updateRtmpUrl=function(t){return this.signal.updateRtmpUrl(t)}},function(t,e){t.exports="'use strict';\n\n/* 该web worker 职能为向 websocket 发送指令及数据*/\n\nvar that = {};\n\nthat.init = function (data) {\n  if (!that.socket) {\n    var url = that.url = data.info.url;\n    var socket = that.socket = new WebSocket(url);\n    socket.onopen = function (event) {\n      postMessage({\n        cmd: 'open'\n      });\n    };\n    socket.onmessage = function (event) {\n      postMessage({\n        cmd: 'message',\n        data: event.data\n      }, [event.data]);\n    };\n    socket.onerror = function (event) {\n      postMessage({\n        cmd: 'error'\n      });\n    };\n    socket.onclose = function (event) {\n      postMessage({ // web 端被动结束\n        cmd: 'close'\n      });\n    };\n    socket.binaryType = 'arraybuffer';\n  }\n};\n\nthat.close = function () {\n  if (that.socket) {\n    that.socket.onopen = null;\n    that.socket.onmessage = null;\n    that.socket.onerror = null;\n    that.socket.onclose = null;\n    that.socket.close(); // 结束socket\n    that.socket = null;\n  }\n  self.close(); // 结束worker，web端主动\n};\n\nthat.send = function (obj) {\n  if (that.socket && that.socket.readyState === WebSocket.OPEN) {\n    that.socket.send(JSON.stringify(obj));\n  }\n};\n// 侦听主线程的worker消息\nself.addEventListener('message', function (event) {\n  var data = event.data;\n  switch (data.cmd) {\n    case 'init':\n      // worker第一步2\n      that.init(data);\n      break;\n    case 'close':\n      // web发起，结束worker及相应socket\n      that.send(data.info);\n      that.close(data);\n      break;\n    case 'msg':\n      that.send(data.info);\n      break;\n  }\n});"},function(t,e){t.exports="precision mediump float;\nuniform sampler2D Ytex, Utex, Vtex;\nvarying vec2 v_texCoord;\nvoid main(void) {\n  float r, g, b, y, u, v;\n  vec4 yuv, rgb;\n  y = texture2D(Ytex, v_texCoord).r;\n  u = texture2D(Utex, v_texCoord).r;\n  v = texture2D(Vtex, v_texCoord).r;\n  yuv = vec4(y, u, v, 1.0);\n  yuv = yuv - vec4(0.0625, 0.5, 0.5, 0.0);\n  yuv = mat4(\n    1.1643, 0.0, 0.0, 0.0,\n    0.0, 1.0, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  ) * yuv;\n  rgb = mat4(\n    1.0, 1.0, 1.0, 0.0,\n    0.0, -0.3917, 2.017, 0.0,\n    1.5958, -0.8129, 0.0, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  ) * yuv;\n  gl_FragColor = rgb;\n  // y = 1.1643 * (y - 0.0625);\n  // u = u - 0.5;\n  // v = v - 0.5;\n  // r = y + 1.5958 * v;\n  // g = y - 0.39173 * u - 0.81290 * v;\n  // b = y + 2.017 * u;\n  // gl_FragColor = vec4(r, g, b, 1.0);\n}\n"},function(t,e){t.exports="attribute vec4 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\nvoid main () {\n  gl_Position = a_position;\n  v_texCoord = a_texCoord;\n}\n"},function(t,e,n){"use strict";var i=a(n(13)),o=a(n(22)),r=a(n(21));function a(t){return t&&t.__esModule?t:{default:t}}var s=void 0,c=n(25),u=n(350),l=n(369),d=function(t){function e(t){(0,i.default)(this,e);var n=(0,o.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.merge(n,t),n.init(),n}return(0,r.default)(e,t),e}(c);d.install=function(t){s=t.util};var h=d.prototype;h.init=function(){this.reset(),this.initRender(),this.initWorker(),window.addEventListener("beforeunload",this.destroy.bind(this))},h.initRender=function(){var t=this;this.render=new u({client:this.client,stream:this,isRemote:this.isRemote,container:this.container,mirror:this.mirror}),this.render.on("resize",function(e){t.emit("resize",e)}),this.render.on("error",function(e){t.emit("error",e)})},h.reset=function(){this.currFrameCount=0,this.width=0,this.height=0,this.timetag=0,this.worker=null,this.render=null},h.initWorker=function(){var t=this,e=new Blob([l],{type:"application/javascript"});(this.worker=new Worker(URL.createObjectURL(e))).addEventListener("message",function(e){var n=e.data;switch(n.cmd){case"open":t.onOpen();break;case"error":t.onError();break;case"close":t.onClose();break;case"message":t.onMessage(n)}}),this.sendWorkerCmd({cmd:"init",info:{url:this.url}})},h.destroyWorker=function(){this.worker&&this.worker.terminate()},h.sendWorkerCmd=function(t){this.worker&&this.worker.postMessage(t)},h.getName=function(){return(this.isRemote?"remote ":"")+"stream socket "+this.url},h.onOpen=function(t){var e=this.getName()+" open -> stream.js";this.logToConsole(e),this.logToPC(e)},h.startStatisticsTimer=function(){var t=this;this.statisticsTimer=setInterval(function(){var e=t.currFrameCount-t.lastFrameCount;t.sendWorkerCmd({cmd:"msg",info:{cmd:"statistics",info:{lastFrameCount:t.lastFrameCount,fps:e,latency:t.latency}}}),t.lastFrameCount=t.currFrameCount,t.latency=0},1e3)},h.onError=function(t){if(!this.destroyed){var e=this.getName()+" error -> stream.js";this.logToConsole(e),this.logToPC(e),this.destroy()}},h.onClose=function(t){this.destroy(t)},h.onMessage=function(t){var e=t.data;if(!this.destroyed&&e instanceof ArrayBuffer){var n=e.byteLength;this.render&&!this.suspended&&this.renderFrame(e,n)}},h.renderFrame=function(t,e){var n=new DataView(t),i=this.width=n.getUint32(0),o=this.height=n.getUint32(4),r=n.getUint32(8),a=n.getUint32(12);this.timetag=1e3*r+a;var s=i*o,c=s/4,u=s/4;if(16+s+c+u!==e){var l="yuv数据长度不匹配: total "+e+", meta 16, width "+i+", height "+o+", yLength "+s+" uLength "+c+" vLength "+u;return this.logToConsole(l),void this.logToPC(l)}this.currFrameCount++,this.scheduleRender({id:this.currFrameCount,width:i,height:o,y:new Uint8Array(t,16,s),u:new Uint8Array(t,16+s,c),v:new Uint8Array(t,16+s+c)})},h.scheduleRender=function(t){this.render&&!this.suspended&&this.render.drawImage(t)},h.suspend=function(){this.suspended=!0},h.resume=function(){this.suspended=!1},h.destroy=function(t){this.sendWorkerCmd({cmd:"close",info:{cmd_type:"on_clear_media"}}),this.destroyed=!0,this.render&&this.render.destroy(),this.reset();var e=t&&t.constructor===Object?t.code:"",n=this.getName()+" destroy: code - "+e+" -> stream.js";this.logToConsole(n),this.logToPC(n)},h.logToConsole=function(){var t=this.client;t&&t.log.apply(t,arguments)},h.logToPC=function(){var t=this.client;if(t){var e=t.signal;e&&e.log.apply(e,arguments)}},t.exports=d},function(t,e,n){"use strict";var i={sortDevices:function(t){t&&t.length>1&&t.sort(function(t,e){var n=-1!==t.name.toLowerCase().indexOf("virtual"),i=-1!==t.path.toLowerCase().indexOf("virtual"),o=-1!==e.name.toLowerCase().indexOf("virtual"),r=-1!==e.path.toLowerCase().indexOf("virtual");return i?1:r?-1:n&&o?0:n?1:o?-1:0})}};t.exports=i},function(t,e,n){"use strict";var i=s(n(96)),o=s(n(13)),r=s(n(22)),a=s(n(21));function s(t){return t&&t.__esModule?t:{default:t}}var c=void 0,u=n(25),l=n(208),d=n(373),h=n(149),f=function(t){function e(t){(0,o.default)(this,e);var n=(0,r.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return c.merge(n,t),n.reset(),window.addEventListener("beforeunload",function(){n.destroy()}),n}return(0,a.default)(e,t),e}(u);f.install=function(t){c=t.util};var p=f.prototype;p.reset=function(){this.inited=!1,this.isMeeting=!1,this.hasInvokePC=!1,this.cmdId=1,this.cmdTasksMap={},this.sessionStopped=!1,this.devicesMap={},this.deviceMap={},this.initSocket(),this.audioGroup={aec:1,ns:1,vad:1,awc:0}},p.initSocket=function(){var t=this.socket=new WebSocket(this.url);t.onopen=this.onOpen.bind(this),t.onmessage=this.onMessage.bind(this),t.onerror=this.onError.bind(this),t.onclose=this.onClose.bind(this)},p.onOpen=function(t){var e=this,n=this.heartbeat?1:0,i=this.getName()+" open -> signal.js";this.inited=!0,this.logToConsole(i),this.log(i),this.emit("open"),this.sendCmd({type:"on_init",info:{account:this.account,type:this.kickLast?1:0,heartbeat:n,app_key:this.appkey}}).then(this.onInit.bind(this)).catch(function(t){e.logToConsole("init error -> signal.js",t),e.emit("initError",t)})},p.onError=function(t){if(!this.destroyed&&this.inited){var e=this.getName()+" error -> signal.js";this.logToConsole(e)}},p.onClose=function(t){var e=this;if(!this.destroyed)if(this.inited){var n=this.getName()+" close -> signal.js : "+t.code;this.logToConsole(n),this.inited=!1,this.emit("close")}else{this.hasInvokePC||(this.hasInvokePC=!0,this.invokePC());var i=this.backoff;i||(i=this.backoff=new h({min:1e3,max:2e3})),3===i.attempts?this.emit("initError",{code:"noPC"}):setTimeout(function(){e.initSocket()},i.duration())}},p.invokePC=function(){var t=document.createElement("iframe");t.src="NIMWebAgent:invokePC",document.body.appendChild(t),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},0)},p.onMessage=function(t){if(!this.destroyed){var e=JSON.parse(t.data),n=e.cmd_id,i=e.cmd_type,o=e.cmd_info;this.shouldPrintMsg({cmdType:i,cmdInfo:o})&&"on_heartbeat_notify"!==i&&this.client.info("signal socket msg",e);var r=this.cmdTasksMap[n];if(r)delete this.cmdTasksMap[n],200===o.code?r.resolve(o):r.reject(o);else switch(i){case"device_status_notify":this.onDeviceStatus(o);break;case"session_notify":this.onSessionNotify(o);break;case"upload_log_notify":this.onUploadLogNotify(o)}}},p.shouldPrintMsg=function(t){var e=t.cmdType,n=t.cmdInfo;return"session_notify"!==e||!n.audio_volume&&!n.net&&!n.static_info},p.sendCmd=function(t){var e=this;return new Promise(function(n,o){var r="on_heartbeat"===t.type?0:e.cmdId++,a=(0,i.default)({cmd_id:r,cmd_type:t.type,cmd_info:t.info||{}},t.extra);e.socket&&e.socket.readyState===WebSocket.OPEN?("on_heartbeat"!==t.type&&e.logToConsole("send signal cmd",a),e.cmdTasksMap[r]={resolve:n,reject:o},e.socket.send(JSON.stringify(a))):o({code:"noConnection"})})},p.onInit=function(t){var e=t.code,n=t.version,i=t.port,o=t.device_list_notify;200===e&&(o.forEach(this.onDevices,this),this.emit("init",{port:i,version:n,code:e}),this.startHeartBeat())},p.startHeartBeat=function(){var t=this;this.heartBeatTimer&&this.stopHeartBeat(),this.heartBeatTimer=setInterval(function(){t.sendCmd({type:"on_heartbeat",info:{}}).catch(function(){t.emit("heartBeatError",{type:"heartbeatError"})})},15e3)},p.stopHeartBeat=function(){clearInterval(this.heartBeatTimer),this.heartBeatTimer=null},p.setVideoViewSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=parseInt(t.width)||0,n=parseInt(t.height)||0,i=void 0===t.cut?1:~~t.cut;return this.sendCmd({type:"on_capture_video_size",info:{width:e,height:n,cut:i}})},p.setVideoViewRemoteSize=function(t){var e=parseInt(t.width)||0,n=parseInt(t.height)||0,i=t.id||0,o=void 0===t.cut?1:~~t.cut;return this.sendCmd({type:"on_rec_video_size",info:{id:i,width:e,height:n,cut:o}})},p.setVideoScale=function(t){var e=t.type,n=void 0===e?l.CHAT_VIDEO_SCALE_None:e,i=t.id;return this.sendCmd({type:"on_send_video_Scale",info:{id:i,type:n}})},p.getDevicesOfType=function(t){var e=this;return this.sendCmd({type:"on_get_devices",info:{type:t}}).then(function(t){return t.devices=t.devices||[],e.onDevices(t),t}).catch(function(t){throw t})},p.onDevices=function(t){var e=t.type,n=t.devices;if(n&&n.length){d.sortDevices(n);var i=l.getDeviceTypeStr(e);i&&(this.devicesMap[e]=n,this.emit("devices",{type:e,typeStr:i,devices:n}))}},p.startAllDevices=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.videoQuality,i=e.audioOutType;Object.keys(this.devicesMap).forEach(function(e){(e=+e)===l.DEVICE_TYPE_AUDIO_OUT_CHAT&&i===l.DEVICE_TYPE_AUDIO_OUT_LOCAL&&(e=i);var o=t.devicesMap[e];t.startDevice({device:o[0],type:e,videoQuality:n})})},p.startDevice=function(t){var e=this,n=t.device,i=t.type,o=t.width,r=t.height;if(n){var a={type:i=+i,path:n.path};return i===l.DEVICE_TYPE_VIDEO&&(a.width=parseInt(o)||0,a.height=parseInt(r)||0),this.deviceMap[i]=n,this.sendCmd({type:"on_start_device",info:a}).catch(function(){throw delete e.deviceMap[i],a})}},p.stopDevice=function(t){var e=this,n=this.deviceMap[t];return delete this.deviceMap[t],this.sendCmd({type:"on_stop_device",info:{type:t}}).catch(function(){e.deviceMap[t]=n})},p.onDeviceStatus=function(t){var e=t.type,n=t.status,o=1==(1&n),r=4==(4&n),a=16==(16&n);8==(8&n)&&(this.deviceMap[e]=t,this.emit("deviceStatus",(0,i.default)({},t,{status:"started"}))),a&&(delete this.deviceMap[e],this.emit("deviceStatus",(0,i.default)({},t,{status:"stopped"}))),r&&(this.deviceMap[e]=t,this.emit("deviceStatus",(0,i.default)({},t,{status:"reset"}))),o&&this.emit("deviceStatus",(0,i.default)({},t,{status:"change"}))},p.startSession=function(t,e){var n=this;this.sessionStopped=!1;var i=c.guid();this.sessionId=i;var o=t.type;this.type=o;var r={id:t.uid,cid:t.channelId,type:o,p2p_connect:1,dispatch:t.serverMap,config:t.clientConfig,v_encode_mode:this.normalizeVideoEncodeMode(t.videoEncodeMode),video_quality:this.normalizeVideoQuality(t.videoQuality),video_record:t.recordVideo?1:0,record:t.recordAudio?1:0,high_rate:t.highAudio?1:0,frame_rate:this.normalizeVideoFrameRate(t.videoFrameRate),max_video_rate:this.normalizeVideoBitrate(t.videoBitrate),custom_layout:t.customLayout};return e&&(r.meeting_mode=1,r.bypass_rtmp=t.bypassRtmp?1:0,r.rtmp_url=t.rtmpUrl||"",r.rtmp_record=t.rtmpRecord?1:0,r.split_mode=t.splitMode||0),r.dispatch&&r.dispatch.constructor!==String&&(r.dispatch=JSON.stringify(r.dispatch)),this.sendCmd({type:"on_start_chat",info:r,extra:{session_id:i}}).then(function(i){var o=i.login,r=i.error;if(r)throw r;return n.isMeeting=e,void 0!==t.ns&&n.audioControl({ns:t.ns}),void 0!==t.vad&&n.audioControl({vad:t.vad}),void 0!==t.aec&&n.audioControl({aec:t.aec}),void 0!==t.awc&&n.awc(t.awc),{login:o}})},p.stopSession=function(){return this.sessionStopped?Promise.resolve():(this.sessionStopped=!0,this.isMeeting=!1,this.sendCmd({type:"on_stop_chat"}))},p.clear=function(){this.sendCmd({type:"on_clear"})},p.switchVideoToAudio=function(){return this.sendCmd({type:"on_set_chat_mode",info:{type:l.NETCALL_TYPE_AUDIO}})},p.switchAudioToVideo=function(){return this.sendCmd({type:"on_set_chat_mode",info:{type:l.NETCALL_TYPE_VIDEO}})},p.logToConsole=function(){var t=this.client;t&&t.log.apply(t,arguments)},p.log=function(t){t&&this.doLog({msg:t,level:3})},p.warn=function(t){t&&this.doLog({msg:t,level:2})},p.err=function(t){t&&this.doLog({msg:t,level:1})},p.doLog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.msg,n=t.level;return this.sendCmd({type:"on_log",info:{type:n,content:""+e}}).catch(function(){})},p.uploadLog=function(t){var e=t.bucket,n=t.objectName,i=t.token;return this.sendCmd({type:"on_upload_log",info:{nos_bucket:e,nos_object:n,nos_header_token:i}}).catch(function(){})},p.normalizeVideoEncodeMode=function(t){return parseInt(t)||l.CHAT_VIDEO_ENCODEMODE_NORMAL},p.normalizeVideoQuality=function(t){return parseInt(t)||l.CHAT_VIDEO_QUALITY_480P},p.setVideoQuality=function(t){return this.sendCmd({type:"on_set_video_quality",info:{type:this.normalizeVideoQuality(t)}})},p.normalizeVideoFrameRate=function(t){return parseInt(t)||l.CHAT_VIDEO_FRAME_RATE_NORMAL},p.setVideoFrameRate=function(t){return this.sendCmd({type:"on_set_video_frame_rate",info:{type:this.normalizeVideoFrameRate(t)}})},p.normalizeVideoBitrate=function(t){return parseInt(t)||0},p.setVideoBitrate=function(t){return this.sendCmd({type:"on_set_video_bitrate",info:{code:this.normalizeVideoBitrate(t)}})},p.netDetect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.appKey,n=t.type,i=t.quality,o=void 0===i?0:i;return this.sendCmd({type:"on_net_detect",info:{app_key:e,type:n,quality:o}})},p.normalizeVolumn=function(t){return t=+t,c.isNumber(t)&&!isNaN(t)||(t=255),t<0&&(t=0),t>255&&(t=255),t},p.setCaptureVolume=function(t){return t=this.normalizeVolumn(t),this.sendCmd({type:"on_capture_volume",info:{status:t}})},p.setPlayVolume=function(t){return t=this.normalizeVolumn(t),this.sendCmd({type:"on_play_volume",info:{status:t}})},p.setRole=function(t){return this.sendCmd({type:"on_set_viewer",info:{status:t}})},p.setAudioBlack=function(t,e){return this.sendCmd({type:"on_set_audio_black",info:{id:t,status:e}})},p.setVideoBlack=function(t,e){return this.sendCmd({type:"on_set_video_black",info:{id:t,status:e}})},p.updateRtmpUrl=function(t){return this.sendCmd({type:"on_update_rtmp_url",info:{content:t}})},p.startRecordMp4=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.id,i=void 0===n?"":n,o=t.aac,r=void 0!==o&&o,a=t.recode,s=void 0===a||a,c=t.width,u=void 0===c?0:c,l=t.height,d=void 0===l?0:l;return console.log("startRecordMp4",r,s,u,d),this.sendCmd({type:"on_record_mp4",info:{path:e,id:i,mp4_audio:~~r,mp4_recode:!!s,mp4_width:+u,mp4_height:+d}})},p.stopRecordMp4=function(t){var e=t.id,n=void 0===e?0:e;return this.sendCmd({type:"on_stop_record_mp4",info:{id:n}})},p.startRecordAac=function(t){var e=t.path;return this.sendCmd({type:"on_record_aac",info:{path:e}})},p.stopRecordAac=function(){return this.sendCmd({type:"on_stop_record_aac",info:{}})},p.onSessionNotify=function(t){t&&(t.user_joined?(console.log("onSessionNotify ",t),this.emit("userJoined",{uid:t.user_joined.id,port:t.user_joined.port,type:this.type,isMeeting:this.isMeeting})):t.user_left?this.emit("userLeft",{uid:t.user_left.id,type:t.user_left.status,isMeeting:this.isMeeting}):t.net?this.emit("netStatus",t.net):t.static_info?this.emit("statistics",t.static_info):t.audio_volume?this.emit("audioVolume",t.audio_volume):t.error?this.emit("error",t.error):t.mp4_start?this.emit("recordMp4",t.mp4_start,"start"):t.mp4_close&&this.emit("recordMp4",t.mp4_close,"close"))},p.onUploadLogNotify=function(t){var e=t.code,n=t.url;200===e&&this.emit("logUploaded",{url:n})},p.getName=function(){return"signal socket "+this.url},p.destroy=function(){this.destroyed=!0,this.stopHeartBeat();this.logToConsole("signal close -> signal.js"),this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===WebSocket.OPEN&&(this.clear(),this.socket.close()),this.socket=null)},p.audioControl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.merge(this.audioGroup,t),this.sendCmd({type:"on_audio_process",info:this.audioGroup,id:++this.cmdId})},p.awc=function(t){return this.sendCmd({type:"on_audio_howling",info:{status:~~t},id:++this.cmdId})},t.exports=f},function(t,e,n){"use strict";var i="wss://localhost.netease.im:",o={baseUrl:i,signalUrl:i+"30000",streamUrl:i+"40000",genStreamUrl:function(t){return""+i+t}};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(96)),o=a(n(117)),r=a(n(116));function a(t){return t&&t.__esModule?t:{default:t}}var s="//"+a(n(3)).default.roomserver+"/v1/sdk/command/rooms/";e.default={parseAccountUidMap:function(t){var e=this;Object.keys(t).forEach(function(n){e.addAccountUidMap({account:n,uid:t[n]})})},addAccountUidMap:function(t){var e=t.account,n=t.uid;this.uidAccountMap||(this.uidAccountMap={}),this.uidAccountMap[n]=e,this.accountUidMap||(this.accountUidMap={}),this.accountUidMap[e]=n},getAccountWithUid:function(t){if(this.uidAccountMap)return this.uidAccountMap[t]},getUidWithAccount:function(t){if(this.accountUidMap)return this.accountUidMap[t]},onError:function(t){this.emit("error",t)},setAudioBlack:function(t){if(this.getUidWithAccount(t))return this.signal.setAudioBlack(this.getUidWithAccount(t),1);return Promise.reject({code:"accountNotMatch"})},setAudioStart:function(t){if(this.getUidWithAccount(t))return this.signal.setAudioBlack(this.getUidWithAccount(t),0);return Promise.reject({code:"accountNotMatch"})},setVideoBlack:function(t){return this.signal.setVideoBlack(this.getUidWithAccount(t),1)},setVideoShow:function(t){return this.signal.setVideoBlack(this.getUidWithAccount(t),0)},startRecordMp4:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dataApi.update({key:"record"}),r.default.verifyOptions(t,"path"),t.account&&(t.id=t.account===this.account?0:this.getUidWithAccount(t.account)),this.signal.startRecordMp4(t)},stopRecordMp4:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.account&&(t.id=t.account===this.account?0:this.getUidWithAccount(t.account)),this.signal.stopRecordMp4(t)},startRecordAac:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dataApi.update({key:"audio_record"}),r.default.verifyOptions(t,"path"),this.signal.startRecordAac(t)},stopRecordAac:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.signal.stopRecordAac(t)},onRecordMp4:function(t,e){t.type=e,this.emit("recordMp4",t)},setNetcallSession:function(t){return this.calling?Promise.reject({type:"statusNotMatch",error:"开启会话失败: 当前正在通话中"}):(this.calling=!0,this.channelId=t.channelId,this.type=+t.netcallType,this.imInfo=t,this.imInfo.rtcUrls=t.rtcServerMap,this.beCalledInfo=this.imInfo,this.target=t.target.account,this.parseAccountUidMap(t.accountUidMap),this.signal.startSession((0,i.default)({},this.imInfo,{type:this.type},this.imInfo.sessionConfig),!1))},ans:function(t){return this.signal?(this.dataApi.update({key:"ans"}),this.sessionConfig.ns=~~t,this.signal.audioControl({ns:this.sessionConfig.ns})):Promise.reject({code:"noConnection"})},aec:function(t){return this.signal?(this.dataApi.update({key:"aec"}),this.sessionConfig.aec=~~t,this.signal.audioControl({aec:this.sessionConfig.aec})):Promise.reject({code:"noConnection"})},voiceDetection:function(t){return this.signal?(this.sessionConfig.vad=~~t,this.signal.audioControl({vad:this.sessionConfig.vad})):Promise.reject({code:"noConnection"})},awc:function(t){return this.signal?(this.dataApi.update({key:"awc"}),this.sessionConfig.awc=~~t,this.signal.awc(this.sessionConfig.awc)):Promise.reject({code:"noConnection"})},updateRtmpHostVideo:function(t){var e=t.account,n=t.uid;if(e&&(n=this.getUidWithAccount(e)),!n)return Promise.reject("账号不在房间中，无法进行操作");var i=s+this.channelId,r=this.callerInfo&&this.callerInfo.serverInfo&&this.callerInfo.serverInfo.token||"";return(0,o.default)({type:"post",url:i,data:{suid:this.getUid(),cid:this.channelId,uid:+n,cmd:10001},header:{Token:r}}).then(function(t){if(200===t.code)return Promise.resolve();var e=void 0;switch(t.code){case 404:e="房间不存在";break;case 405:e="目标用户不在房间中";break;case 406:e="没有权限";break;case 417:e="请求数据不对";break;case 600:e="服务器内部错误";break;default:e="请求参数不正确"}return Promise.reject(e)})}},t.exports=e.default},function(t,e,n){"use strict";var i,o=n(96),r=(i=o)&&i.__esModule?i:{default:i};n(137);var a=n(352),s=n(267),c=n(266),u=n(351),l=n(208),d=n(265),h=n(264),f=n(263),p=void 0,v=(0,r.default)({version:"5.2.0",versionAgent:"2.6.0.328"},l,{webgl:a,install:function(t,e){s.install(t,e),c.install(t,e),t.parser.mixin({configMap:d,serializeMap:h,unserializeMap:f}),u.install(t,e)},getInstance:function(t){return p||(p=new u(t)),p},destroy:function(){p&&(p.destroy(),p=null)}});t.exports=v}])});